#region Header

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.3053
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#endregion

using System;
using System.Drawing;

using KiSS4.Common;
using KiSS4.DB;
using KiSS4.Gui;

namespace KiSS4.Fallfuehrung.ZH
{
    public class CtlFaVoranmeldung : KiSS4.Gui.KissUserControl
    {
        #region Fields

        #region Private Fields

        private string SessionUserName = "";
        private System.ComponentModel.IContainer components = null;
        private KiSS4.Gui.KissLookUpEdit edtAbschlussGrund;
        private KiSS4.Gui.KissRTFEdit edtBemerkung;
        private KiSS4.Gui.KissDateEdit edtDatum;
        private KiSS4.Gui.KissDateEdit edtFeedbackDatumBis;
        private KiSS4.Gui.KissDateEdit edtFeedbackErteiltAm;
        private KiSS4.Gui.KissButtonEdit edtFeedbackErteiltUser;
        private KiSS4.Gui.KissButtonEdit edtFeedbackUser;
        private KiSS4.Gui.KissTextEdit edtStelleEMail;
        private KiSS4.Gui.KissTextEdit edtStelleName;
        private KiSS4.Gui.KissTextEdit edtStelleTelefon;
        private KiSS4.Gui.KissLookUpEdit edtStelleTypCode;
        private KiSS4.Gui.KissButtonEdit edtUserName;

        // Letzte Bearbeitung
        // 28.08.2007 : sozheo : Alles neu
        // 04.02.2008 : sozheo : Umbau für mehrere Voranmeldungen
        // -------------------------------------------------------------
        private int faLeistungID = 0;
        private int faVoranmeldungID = 0;
        private KiSS4.Gui.KissLabel kissLabel2;
        private KiSS4.Gui.KissLabel kissLabel5;
        private KiSS4.Gui.KissLabel lblAbschlussGrund;
        private KiSS4.Gui.KissLabel lblBemerkung;
        private KiSS4.Gui.KissLabel lblDatum;
        private KiSS4.Gui.KissLabel lblFeedbackDatumBis;
        private KiSS4.Gui.KissLabel lblFeedbackErteiltAm;
        private KiSS4.Gui.KissLabel lblFeedbackErteiltUser;
        private KiSS4.Gui.KissLabel lblFeedbackUser;
        private KiSS4.Gui.KissLabel lblStelleEMail;
        private KiSS4.Gui.KissLabel lblStelleName;
        private KiSS4.Gui.KissLabel lblStelleTelefon;
        private KiSS4.Gui.KissLabel lblStelleTypCode;
        private KiSS4.Gui.KissLabel lblTitle;
        private KiSS4.Gui.KissLabel lblUserName;
        private System.Windows.Forms.PictureBox picTitel;
        private KiSS4.DB.SqlQuery qryFaVoranmeldung;

        #endregion

        #endregion

        #region Constructors

        public CtlFaVoranmeldung()
        {
            this.InitializeComponent();
        }

        #endregion

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject8 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject7 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject6 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject5 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject4 = new DevExpress.Utils.SerializableAppearanceObject();
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(CtlFaVoranmeldung));
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject3 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject2 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject1 = new DevExpress.Utils.SerializableAppearanceObject();
            this.edtDatum = new KiSS4.Gui.KissDateEdit();
            this.qryFaVoranmeldung = new KiSS4.DB.SqlQuery(this.components);
            this.lblTitle = new KiSS4.Gui.KissLabel();
            this.edtUserName = new KiSS4.Gui.KissButtonEdit();
            this.edtStelleTypCode = new KiSS4.Gui.KissLookUpEdit();
            this.edtStelleName = new KiSS4.Gui.KissTextEdit();
            this.lblStelleTypCode = new KiSS4.Gui.KissLabel();
            this.edtStelleTelefon = new KiSS4.Gui.KissTextEdit();
            this.edtStelleEMail = new KiSS4.Gui.KissTextEdit();
            this.edtFeedbackDatumBis = new KiSS4.Gui.KissDateEdit();
            this.edtFeedbackUser = new KiSS4.Gui.KissButtonEdit();
            this.edtFeedbackErteiltAm = new KiSS4.Gui.KissDateEdit();
            this.edtFeedbackErteiltUser = new KiSS4.Gui.KissButtonEdit();
            this.lblDatum = new KiSS4.Gui.KissLabel();
            this.edtAbschlussGrund = new KiSS4.Gui.KissLookUpEdit();
            this.edtBemerkung = new KiSS4.Gui.KissRTFEdit();
            this.lblStelleName = new KiSS4.Gui.KissLabel();
            this.lblUserName = new KiSS4.Gui.KissLabel();
            this.lblStelleTelefon = new KiSS4.Gui.KissLabel();
            this.lblFeedbackDatumBis = new KiSS4.Gui.KissLabel();
            this.lblBemerkung = new KiSS4.Gui.KissLabel();
            this.lblStelleEMail = new KiSS4.Gui.KissLabel();
            this.kissLabel2 = new KiSS4.Gui.KissLabel();
            this.kissLabel5 = new KiSS4.Gui.KissLabel();
            this.picTitel = new System.Windows.Forms.PictureBox();
            this.lblFeedbackErteiltAm = new KiSS4.Gui.KissLabel();
            this.lblFeedbackUser = new KiSS4.Gui.KissLabel();
            this.lblAbschlussGrund = new KiSS4.Gui.KissLabel();
            this.lblFeedbackErteiltUser = new KiSS4.Gui.KissLabel();
            ((System.ComponentModel.ISupportInitialize)(this.edtDatum.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryFaVoranmeldung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblTitle)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtUserName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTypCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTypCode.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleTypCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTelefon.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleEMail.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackDatumBis.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackUser.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackErteiltAm.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackErteiltUser.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatum)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrund)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrund.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleName)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblUserName)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleTelefon)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackDatumBis)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBemerkung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleEMail)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel2)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel5)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.picTitel)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackErteiltAm)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackUser)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblAbschlussGrund)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackErteiltUser)).BeginInit();
            this.SuspendLayout();
            // 
            // edtDatum
            // 
            this.edtDatum.DataMember = "Datum";
            this.edtDatum.DataSource = this.qryFaVoranmeldung;
            this.edtDatum.EditValue = null;
            this.edtDatum.Location = new System.Drawing.Point(130, 62);
            this.edtDatum.Name = "edtDatum";
            this.edtDatum.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtDatum.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtDatum.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtDatum.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtDatum.Properties.Appearance.Options.UseBackColor = true;
            this.edtDatum.Properties.Appearance.Options.UseBorderColor = true;
            this.edtDatum.Properties.Appearance.Options.UseFont = true;
            this.edtDatum.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject8.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject8.Options.UseBackColor = true;
            this.edtDatum.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph, "", 8, true, true, false, DevExpress.Utils.HorzAlignment.Center, ((System.Drawing.Image)(resources.GetObject("edtDatum.Properties.Buttons"))), new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject8)});
            this.edtDatum.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtDatum.Properties.Name = "kissDateEdit14.Properties";
            this.edtDatum.Properties.ShowToday = false;
            this.edtDatum.Size = new System.Drawing.Size(90, 24);
            this.edtDatum.TabIndex = 0;
            this.edtDatum.Validated += new System.EventHandler(this.edtDatum_Validated);
            // 
            // qryFaVoranmeldung
            // 
            this.qryFaVoranmeldung.CanUpdate = true;
            this.qryFaVoranmeldung.HostControl = this;
            this.qryFaVoranmeldung.SelectStatement = resources.GetString("qryFaVoranmeldung.SelectStatement");
            this.qryFaVoranmeldung.TableName = "FaVoranmeldung";
            this.qryFaVoranmeldung.AfterFill += new System.EventHandler(this.qryFaVoranmeldung_AfterFill);
            this.qryFaVoranmeldung.AfterInsert += new System.EventHandler(this.qryFaVoranmeldung_AfterInsert);
            this.qryFaVoranmeldung.BeforePost += new System.EventHandler(this.qryFaVoranmeldung_BeforePost);
            this.qryFaVoranmeldung.AfterPost += new System.EventHandler(this.qryFaVoranmeldung_AfterPost);
            this.qryFaVoranmeldung.PositionChanged += new System.EventHandler(this.qryFaVoranmeldung_PositionChanged);
            // 
            // lblTitle
            // 
            this.lblTitle.LabelStyle = KiSS4.Gui.LabelStyleType.DataView;
            this.lblTitle.Location = new System.Drawing.Point(35, 10);
            this.lblTitle.Name = "lblTitle";
            this.lblTitle.Size = new System.Drawing.Size(109, 16);
            this.lblTitle.TabIndex = 0;
            this.lblTitle.Text = "Voranmeldung";
            this.lblTitle.UseCompatibleTextRendering = true;
            // 
            // edtUserName
            // 
            this.edtUserName.DataMember = "UserName";
            this.edtUserName.DataSource = this.qryFaVoranmeldung;
            this.edtUserName.Location = new System.Drawing.Point(295, 62);
            this.edtUserName.Name = "edtUserName";
            this.edtUserName.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtUserName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtUserName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtUserName.Properties.Appearance.Options.UseBackColor = true;
            this.edtUserName.Properties.Appearance.Options.UseBorderColor = true;
            this.edtUserName.Properties.Appearance.Options.UseFont = true;
            this.edtUserName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject7.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject7.Options.UseBackColor = true;
            this.edtUserName.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Ellipsis, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject7)});
            this.edtUserName.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtUserName.Properties.Name = "kissButtonEdit9.Properties";
            this.edtUserName.SearchStringWhitelist = new string[] {
        ".",
        "*",
        "%"};
            this.edtUserName.Size = new System.Drawing.Size(363, 24);
            this.edtUserName.TabIndex = 1;
            this.edtUserName.UserModifiedFld += new KiSS4.Gui.UserModifiedFldEventHandler(this.edtUserName_UserModifiedFld);
            // 
            // edtStelleTypCode
            // 
            this.edtStelleTypCode.DataMember = "StelleTypCode";
            this.edtStelleTypCode.DataSource = this.qryFaVoranmeldung;
            this.edtStelleTypCode.Location = new System.Drawing.Point(130, 136);
            this.edtStelleTypCode.LOVName = "BaVoranmeldungStelle";
            this.edtStelleTypCode.Name = "edtStelleTypCode";
            this.edtStelleTypCode.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtStelleTypCode.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtStelleTypCode.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtStelleTypCode.Properties.Appearance.Options.UseBackColor = true;
            this.edtStelleTypCode.Properties.Appearance.Options.UseBorderColor = true;
            this.edtStelleTypCode.Properties.Appearance.Options.UseFont = true;
            this.edtStelleTypCode.Properties.AppearanceDropDown.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.edtStelleTypCode.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.edtStelleTypCode.Properties.AppearanceDropDown.Options.UseBackColor = true;
            this.edtStelleTypCode.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtStelleTypCode.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject6.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject6.Options.UseBackColor = true;
            this.edtStelleTypCode.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject6)});
            this.edtStelleTypCode.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtStelleTypCode.Properties.Name = "kissLookUpEdit1.Properties";
            this.edtStelleTypCode.Properties.NullText = "";
            this.edtStelleTypCode.Properties.ShowFooter = false;
            this.edtStelleTypCode.Properties.ShowHeader = false;
            this.edtStelleTypCode.Size = new System.Drawing.Size(242, 24);
            this.edtStelleTypCode.TabIndex = 2;
            // 
            // edtStelleName
            // 
            this.edtStelleName.DataMember = "StelleName";
            this.edtStelleName.DataSource = this.qryFaVoranmeldung;
            this.edtStelleName.Location = new System.Drawing.Point(130, 166);
            this.edtStelleName.Name = "edtStelleName";
            this.edtStelleName.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtStelleName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtStelleName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtStelleName.Properties.Appearance.Options.UseBackColor = true;
            this.edtStelleName.Properties.Appearance.Options.UseBorderColor = true;
            this.edtStelleName.Properties.Appearance.Options.UseFont = true;
            this.edtStelleName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtStelleName.Properties.Name = "kissTextEdit3.Properties";
            this.edtStelleName.Size = new System.Drawing.Size(242, 24);
            this.edtStelleName.TabIndex = 3;
            // 
            // lblStelleTypCode
            // 
            this.lblStelleTypCode.Location = new System.Drawing.Point(5, 136);
            this.lblStelleTypCode.Name = "lblStelleTypCode";
            this.lblStelleTypCode.Size = new System.Drawing.Size(119, 24);
            this.lblStelleTypCode.TabIndex = 3;
            this.lblStelleTypCode.Text = "Stelle";
            this.lblStelleTypCode.UseCompatibleTextRendering = true;
            // 
            // edtStelleTelefon
            // 
            this.edtStelleTelefon.DataMember = "StelleTelefon";
            this.edtStelleTelefon.DataSource = this.qryFaVoranmeldung;
            this.edtStelleTelefon.Location = new System.Drawing.Point(130, 196);
            this.edtStelleTelefon.Name = "edtStelleTelefon";
            this.edtStelleTelefon.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtStelleTelefon.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtStelleTelefon.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtStelleTelefon.Properties.Appearance.Options.UseBackColor = true;
            this.edtStelleTelefon.Properties.Appearance.Options.UseBorderColor = true;
            this.edtStelleTelefon.Properties.Appearance.Options.UseFont = true;
            this.edtStelleTelefon.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtStelleTelefon.Properties.Name = "kissTextEdit4.Properties";
            this.edtStelleTelefon.Size = new System.Drawing.Size(242, 24);
            this.edtStelleTelefon.TabIndex = 4;
            // 
            // edtStelleEMail
            // 
            this.edtStelleEMail.DataMember = "StelleEMail";
            this.edtStelleEMail.DataSource = this.qryFaVoranmeldung;
            this.edtStelleEMail.Location = new System.Drawing.Point(130, 226);
            this.edtStelleEMail.Name = "edtStelleEMail";
            this.edtStelleEMail.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtStelleEMail.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtStelleEMail.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtStelleEMail.Properties.Appearance.Options.UseBackColor = true;
            this.edtStelleEMail.Properties.Appearance.Options.UseBorderColor = true;
            this.edtStelleEMail.Properties.Appearance.Options.UseFont = true;
            this.edtStelleEMail.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtStelleEMail.Properties.Name = "kissTextEdit1.Properties";
            this.edtStelleEMail.Size = new System.Drawing.Size(242, 24);
            this.edtStelleEMail.TabIndex = 5;
            // 
            // edtFeedbackDatumBis
            // 
            this.edtFeedbackDatumBis.DataMember = "FeedbackDatumBis";
            this.edtFeedbackDatumBis.DataSource = this.qryFaVoranmeldung;
            this.edtFeedbackDatumBis.EditValue = null;
            this.edtFeedbackDatumBis.Location = new System.Drawing.Point(130, 256);
            this.edtFeedbackDatumBis.Name = "edtFeedbackDatumBis";
            this.edtFeedbackDatumBis.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtFeedbackDatumBis.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtFeedbackDatumBis.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFeedbackDatumBis.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFeedbackDatumBis.Properties.Appearance.Options.UseBackColor = true;
            this.edtFeedbackDatumBis.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFeedbackDatumBis.Properties.Appearance.Options.UseFont = true;
            this.edtFeedbackDatumBis.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject5.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject5.Options.UseBackColor = true;
            this.edtFeedbackDatumBis.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph, "", 8, true, true, false, DevExpress.Utils.HorzAlignment.Center, ((System.Drawing.Image)(resources.GetObject("edtFeedbackDatumBis.Properties.Buttons"))), new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject5)});
            this.edtFeedbackDatumBis.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtFeedbackDatumBis.Properties.Name = "kissDateEdit3.Properties";
            this.edtFeedbackDatumBis.Properties.ShowToday = false;
            this.edtFeedbackDatumBis.Size = new System.Drawing.Size(90, 24);
            this.edtFeedbackDatumBis.TabIndex = 6;
            this.edtFeedbackDatumBis.Validated += new System.EventHandler(this.edtFeedbackDatumBis_Validated);
            // 
            // edtFeedbackUser
            // 
            this.edtFeedbackUser.DataMember = "FeedbackUser";
            this.edtFeedbackUser.DataSource = this.qryFaVoranmeldung;
            this.edtFeedbackUser.Location = new System.Drawing.Point(295, 256);
            this.edtFeedbackUser.Name = "edtFeedbackUser";
            this.edtFeedbackUser.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtFeedbackUser.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFeedbackUser.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFeedbackUser.Properties.Appearance.Options.UseBackColor = true;
            this.edtFeedbackUser.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFeedbackUser.Properties.Appearance.Options.UseFont = true;
            this.edtFeedbackUser.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject4.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject4.Options.UseBackColor = true;
            this.edtFeedbackUser.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Ellipsis, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject4)});
            this.edtFeedbackUser.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtFeedbackUser.Properties.Name = "kissButtonEdit9.Properties";
            this.edtFeedbackUser.SearchStringWhitelist = new string[] {
        ".",
        "*",
        "%"};
            this.edtFeedbackUser.Size = new System.Drawing.Size(363, 24);
            this.edtFeedbackUser.TabIndex = 7;
            this.edtFeedbackUser.UserModifiedFld += new KiSS4.Gui.UserModifiedFldEventHandler(this.edtFeedbackUser_UserModifiedFld);
            // 
            // edtFeedbackErteiltAm
            // 
            this.edtFeedbackErteiltAm.DataMember = "FeedbackErteiltAm";
            this.edtFeedbackErteiltAm.DataSource = this.qryFaVoranmeldung;
            this.edtFeedbackErteiltAm.EditValue = null;
            this.edtFeedbackErteiltAm.Location = new System.Drawing.Point(130, 286);
            this.edtFeedbackErteiltAm.Name = "edtFeedbackErteiltAm";
            this.edtFeedbackErteiltAm.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtFeedbackErteiltAm.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtFeedbackErteiltAm.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFeedbackErteiltAm.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFeedbackErteiltAm.Properties.Appearance.Options.UseBackColor = true;
            this.edtFeedbackErteiltAm.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFeedbackErteiltAm.Properties.Appearance.Options.UseFont = true;
            this.edtFeedbackErteiltAm.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject3.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject3.Options.UseBackColor = true;
            this.edtFeedbackErteiltAm.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph, "", 8, true, true, false, DevExpress.Utils.HorzAlignment.Center, ((System.Drawing.Image)(resources.GetObject("edtFeedbackErteiltAm.Properties.Buttons"))), new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject3)});
            this.edtFeedbackErteiltAm.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtFeedbackErteiltAm.Properties.Name = "kissDateEdit3.Properties";
            this.edtFeedbackErteiltAm.Properties.ShowToday = false;
            this.edtFeedbackErteiltAm.Size = new System.Drawing.Size(90, 24);
            this.edtFeedbackErteiltAm.TabIndex = 8;
            this.edtFeedbackErteiltAm.Validated += new System.EventHandler(this.edtFeedbackErteiltAm_Validated);
            // 
            // edtFeedbackErteiltUser
            // 
            this.edtFeedbackErteiltUser.DataMember = "FeedbackErteiltUser";
            this.edtFeedbackErteiltUser.DataSource = this.qryFaVoranmeldung;
            this.edtFeedbackErteiltUser.Location = new System.Drawing.Point(295, 286);
            this.edtFeedbackErteiltUser.Name = "edtFeedbackErteiltUser";
            this.edtFeedbackErteiltUser.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtFeedbackErteiltUser.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFeedbackErteiltUser.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFeedbackErteiltUser.Properties.Appearance.Options.UseBackColor = true;
            this.edtFeedbackErteiltUser.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFeedbackErteiltUser.Properties.Appearance.Options.UseFont = true;
            this.edtFeedbackErteiltUser.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject2.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject2.Options.UseBackColor = true;
            this.edtFeedbackErteiltUser.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Ellipsis, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject2)});
            this.edtFeedbackErteiltUser.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtFeedbackErteiltUser.Properties.Name = "kissButtonEdit9.Properties";
            this.edtFeedbackErteiltUser.SearchStringWhitelist = new string[] {
        ".",
        "*",
        "%"};
            this.edtFeedbackErteiltUser.Size = new System.Drawing.Size(363, 24);
            this.edtFeedbackErteiltUser.TabIndex = 9;
            this.edtFeedbackErteiltUser.UserModifiedFld += new KiSS4.Gui.UserModifiedFldEventHandler(this.edtFeedbackErteiltUser_UserModifiedFld);
            // 
            // lblDatum
            // 
            this.lblDatum.Location = new System.Drawing.Point(5, 62);
            this.lblDatum.Name = "lblDatum";
            this.lblDatum.Size = new System.Drawing.Size(119, 24);
            this.lblDatum.TabIndex = 9;
            this.lblDatum.Text = "Datum";
            this.lblDatum.UseCompatibleTextRendering = true;
            // 
            // edtAbschlussGrund
            // 
            this.edtAbschlussGrund.DataMember = "FaVoranmeldungAbschlussgrundCode";
            this.edtAbschlussGrund.DataSource = this.qryFaVoranmeldung;
            this.edtAbschlussGrund.Location = new System.Drawing.Point(130, 316);
            this.edtAbschlussGrund.LOVName = "FaVoranmeldungAbschlussgrund";
            this.edtAbschlussGrund.Name = "edtAbschlussGrund";
            this.edtAbschlussGrund.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtAbschlussGrund.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtAbschlussGrund.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtAbschlussGrund.Properties.Appearance.Options.UseBackColor = true;
            this.edtAbschlussGrund.Properties.Appearance.Options.UseBorderColor = true;
            this.edtAbschlussGrund.Properties.Appearance.Options.UseFont = true;
            this.edtAbschlussGrund.Properties.AppearanceDropDown.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.edtAbschlussGrund.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.edtAbschlussGrund.Properties.AppearanceDropDown.Options.UseBackColor = true;
            this.edtAbschlussGrund.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtAbschlussGrund.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject1.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject1.Options.UseBackColor = true;
            this.edtAbschlussGrund.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject1)});
            this.edtAbschlussGrund.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtAbschlussGrund.Properties.Name = "kissLookUpEdit1.Properties";
            this.edtAbschlussGrund.Properties.NullText = "";
            this.edtAbschlussGrund.Properties.ShowFooter = false;
            this.edtAbschlussGrund.Properties.ShowHeader = false;
            this.edtAbschlussGrund.Size = new System.Drawing.Size(242, 24);
            this.edtAbschlussGrund.TabIndex = 10;
            // 
            // edtBemerkung
            // 
            this.edtBemerkung.BackColor = System.Drawing.Color.White;
            this.edtBemerkung.DataMember = "Bemerkung";
            this.edtBemerkung.DataSource = this.qryFaVoranmeldung;
            this.edtBemerkung.Font = new System.Drawing.Font("Arial", 10F);
            this.edtBemerkung.Location = new System.Drawing.Point(130, 346);
            this.edtBemerkung.Name = "edtBemerkung";
            this.edtBemerkung.Size = new System.Drawing.Size(528, 94);
            this.edtBemerkung.TabIndex = 11;
            // 
            // lblStelleName
            // 
            this.lblStelleName.Location = new System.Drawing.Point(5, 166);
            this.lblStelleName.Name = "lblStelleName";
            this.lblStelleName.Size = new System.Drawing.Size(119, 24);
            this.lblStelleName.TabIndex = 11;
            this.lblStelleName.Text = "Name";
            this.lblStelleName.UseCompatibleTextRendering = true;
            // 
            // lblUserName
            // 
            this.lblUserName.Location = new System.Drawing.Point(226, 62);
            this.lblUserName.Name = "lblUserName";
            this.lblUserName.Size = new System.Drawing.Size(63, 24);
            this.lblUserName.TabIndex = 11;
            this.lblUserName.Text = "Mitarbeiter/in";
            this.lblUserName.UseCompatibleTextRendering = true;
            // 
            // lblStelleTelefon
            // 
            this.lblStelleTelefon.Location = new System.Drawing.Point(5, 196);
            this.lblStelleTelefon.Name = "lblStelleTelefon";
            this.lblStelleTelefon.Size = new System.Drawing.Size(119, 24);
            this.lblStelleTelefon.TabIndex = 13;
            this.lblStelleTelefon.Text = "Telefon";
            this.lblStelleTelefon.UseCompatibleTextRendering = true;
            // 
            // lblFeedbackDatumBis
            // 
            this.lblFeedbackDatumBis.Location = new System.Drawing.Point(5, 256);
            this.lblFeedbackDatumBis.Name = "lblFeedbackDatumBis";
            this.lblFeedbackDatumBis.Size = new System.Drawing.Size(119, 24);
            this.lblFeedbackDatumBis.TabIndex = 25;
            this.lblFeedbackDatumBis.Text = "Feedback bis";
            this.lblFeedbackDatumBis.UseCompatibleTextRendering = true;
            // 
            // lblBemerkung
            // 
            this.lblBemerkung.Location = new System.Drawing.Point(5, 346);
            this.lblBemerkung.Name = "lblBemerkung";
            this.lblBemerkung.Size = new System.Drawing.Size(119, 24);
            this.lblBemerkung.TabIndex = 32;
            this.lblBemerkung.Text = "Bemerkung";
            this.lblBemerkung.UseCompatibleTextRendering = true;
            // 
            // lblStelleEMail
            // 
            this.lblStelleEMail.Location = new System.Drawing.Point(5, 226);
            this.lblStelleEMail.Name = "lblStelleEMail";
            this.lblStelleEMail.Size = new System.Drawing.Size(119, 24);
            this.lblStelleEMail.TabIndex = 35;
            this.lblStelleEMail.Text = "E-Mail";
            this.lblStelleEMail.UseCompatibleTextRendering = true;
            // 
            // kissLabel2
            // 
            this.kissLabel2.LabelStyle = KiSS4.Gui.LabelStyleType.DataView;
            this.kissLabel2.Location = new System.Drawing.Point(5, 107);
            this.kissLabel2.Name = "kissLabel2";
            this.kissLabel2.Size = new System.Drawing.Size(152, 14);
            this.kissLabel2.TabIndex = 59;
            this.kissLabel2.Text = "Fachstelle/Fachperson";
            this.kissLabel2.UseCompatibleTextRendering = true;
            // 
            // kissLabel5
            // 
            this.kissLabel5.LabelStyle = KiSS4.Gui.LabelStyleType.DataView;
            this.kissLabel5.Location = new System.Drawing.Point(5, 38);
            this.kissLabel5.Name = "kissLabel5";
            this.kissLabel5.Size = new System.Drawing.Size(100, 16);
            this.kissLabel5.TabIndex = 61;
            this.kissLabel5.Text = "Voranmeldung";
            this.kissLabel5.UseCompatibleTextRendering = true;
            // 
            // picTitel
            // 
            this.picTitel.Location = new System.Drawing.Point(5, 10);
            this.picTitel.Name = "picTitel";
            this.picTitel.Size = new System.Drawing.Size(16, 16);
            this.picTitel.TabIndex = 294;
            this.picTitel.TabStop = false;
            // 
            // lblFeedbackErteiltAm
            // 
            this.lblFeedbackErteiltAm.Location = new System.Drawing.Point(5, 286);
            this.lblFeedbackErteiltAm.Name = "lblFeedbackErteiltAm";
            this.lblFeedbackErteiltAm.Size = new System.Drawing.Size(119, 24);
            this.lblFeedbackErteiltAm.TabIndex = 296;
            this.lblFeedbackErteiltAm.Text = "Feedback gegeben am";
            this.lblFeedbackErteiltAm.UseCompatibleTextRendering = true;
            // 
            // lblFeedbackUser
            // 
            this.lblFeedbackUser.Location = new System.Drawing.Point(226, 256);
            this.lblFeedbackUser.Name = "lblFeedbackUser";
            this.lblFeedbackUser.Size = new System.Drawing.Size(63, 24);
            this.lblFeedbackUser.TabIndex = 298;
            this.lblFeedbackUser.Text = "Mitarbeiter/In";
            this.lblFeedbackUser.UseCompatibleTextRendering = true;
            // 
            // lblAbschlussGrund
            // 
            this.lblAbschlussGrund.Location = new System.Drawing.Point(5, 316);
            this.lblAbschlussGrund.Name = "lblAbschlussGrund";
            this.lblAbschlussGrund.Size = new System.Drawing.Size(119, 24);
            this.lblAbschlussGrund.TabIndex = 300;
            this.lblAbschlussGrund.Text = "Abschlussgrund";
            this.lblAbschlussGrund.UseCompatibleTextRendering = true;
            // 
            // lblFeedbackErteiltUser
            // 
            this.lblFeedbackErteiltUser.Location = new System.Drawing.Point(226, 286);
            this.lblFeedbackErteiltUser.Name = "lblFeedbackErteiltUser";
            this.lblFeedbackErteiltUser.Size = new System.Drawing.Size(63, 24);
            this.lblFeedbackErteiltUser.TabIndex = 301;
            this.lblFeedbackErteiltUser.Text = "Mitarbeiter/In";
            this.lblFeedbackErteiltUser.UseCompatibleTextRendering = true;
            // 
            // CtlFaVoranmeldung
            // 
            this.ActiveSQLQuery = this.qryFaVoranmeldung;
            this.Controls.Add(this.lblFeedbackErteiltUser);
            this.Controls.Add(this.lblAbschlussGrund);
            this.Controls.Add(this.lblFeedbackUser);
            this.Controls.Add(this.lblFeedbackErteiltAm);
            this.Controls.Add(this.picTitel);
            this.Controls.Add(this.kissLabel5);
            this.Controls.Add(this.kissLabel2);
            this.Controls.Add(this.lblStelleEMail);
            this.Controls.Add(this.lblBemerkung);
            this.Controls.Add(this.lblFeedbackDatumBis);
            this.Controls.Add(this.lblStelleTelefon);
            this.Controls.Add(this.lblUserName);
            this.Controls.Add(this.lblStelleName);
            this.Controls.Add(this.edtBemerkung);
            this.Controls.Add(this.edtAbschlussGrund);
            this.Controls.Add(this.lblDatum);
            this.Controls.Add(this.edtFeedbackErteiltUser);
            this.Controls.Add(this.edtFeedbackErteiltAm);
            this.Controls.Add(this.edtFeedbackUser);
            this.Controls.Add(this.edtFeedbackDatumBis);
            this.Controls.Add(this.edtStelleEMail);
            this.Controls.Add(this.edtStelleTelefon);
            this.Controls.Add(this.lblStelleTypCode);
            this.Controls.Add(this.edtStelleName);
            this.Controls.Add(this.edtStelleTypCode);
            this.Controls.Add(this.edtUserName);
            this.Controls.Add(this.lblTitle);
            this.Controls.Add(this.edtDatum);
            this.Name = "CtlFaVoranmeldung";
            this.Size = new System.Drawing.Size(670, 455);
            ((System.ComponentModel.ISupportInitialize)(this.edtDatum.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryFaVoranmeldung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblTitle)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtUserName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTypCode.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTypCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleTypCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleTelefon.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtStelleEMail.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackDatumBis.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackUser.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackErteiltAm.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFeedbackErteiltUser.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatum)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrund.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrund)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleName)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblUserName)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleTelefon)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackDatumBis)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBemerkung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblStelleEMail)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel2)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel5)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.picTitel)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackErteiltAm)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackUser)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblAbschlussGrund)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFeedbackErteiltUser)).EndInit();
            this.ResumeLayout(false);

        }

        #endregion

        #region Dispose

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        protected override void Dispose(bool disposing)
        {
            if (disposing)
            {
                if ((components != null))
                {
                    components.Dispose();
                }
            }
            base.Dispose(disposing);
        }

        #endregion

        #region EventHandlers

        private void edtDatum_Validated(object sender, EventArgs e)
        {
            if (edtDatum.IsModified)
            {
                // wenn Datum geändert, soll user gefüllt werden
                if (!DBUtil.IsEmpty(edtDatum.EditValue))
                {
                    qryFaVoranmeldung["UserID"] = Session.User.UserID;
                    qryFaVoranmeldung["UserName"] = SessionUserName;
                }
                else
                {
                    qryFaVoranmeldung["UserID"] = DBNull.Value;
                    qryFaVoranmeldung["UserName"] = DBNull.Value;
                }
                edtDatum.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["UserName"]);
                qryFaVoranmeldung.RefreshDisplay();
            }
        }

        private void edtFeedbackDatumBis_Validated(object sender, EventArgs e)
        {
            if (edtFeedbackDatumBis.IsModified)
            {
                // wenn Datum geändert, soll user gefüllt werden
                if (!DBUtil.IsEmpty(edtFeedbackDatumBis.EditValue))
                {
                    qryFaVoranmeldung["FeedbackUserID"] = Session.User.UserID;
                    qryFaVoranmeldung["FeedbackUser"] = SessionUserName;
                }
                else
                {
                    qryFaVoranmeldung["FeedbackUserID"] = DBNull.Value;
                    qryFaVoranmeldung["FeedbackUser"] = DBNull.Value;
                }
                edtFeedbackDatumBis.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["UserName"]);
                qryFaVoranmeldung.RefreshDisplay();
            }
        }

        private void edtFeedbackErteiltAm_Validated(object sender, EventArgs e)
        {
            if (edtFeedbackErteiltAm.IsModified)
            {
                // wenn Datum geändert, soll user gefüllt werden
                if (!DBUtil.IsEmpty(edtFeedbackErteiltAm.EditValue))
                {
                    qryFaVoranmeldung["FeedbackErteiltUserID"] = Session.User.UserID;
                    qryFaVoranmeldung["FeedbackErteiltUser"] = SessionUserName;
                }
                else
                {
                    qryFaVoranmeldung["FeedbackErteiltUserID"] = DBNull.Value;
                    qryFaVoranmeldung["FeedbackErteiltUser"] = DBNull.Value;
                }
                edtFeedbackErteiltAm.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["UserName"]);
                qryFaVoranmeldung.RefreshDisplay();
            }
        }

        private void edtFeedbackErteiltUser_UserModifiedFld(object sender, KiSS4.Gui.UserModifiedFldEventArgs e)
        {
            // Letzte Bearbeitung
            // 15.02.2008 : sozheo : Dialog-SQL jetzt nach Norm
            // -------------------------------------------------------------

            if (!edtFeedbackErteiltUser.UserModified) return;

            string SearchString = edtFeedbackErteiltUser.Text.Replace("*", "%").Replace("?", "_").Replace(" ", "%");

            if (DBUtil.IsEmpty(SearchString))
            {
                if (e.ButtonClicked)
                    SearchString = "%";
                else
                {
                    qryFaVoranmeldung["FeedbackErteiltUserID"] = DBNull.Value;
                    qryFaVoranmeldung["FeedbackErteiltUser"] = DBNull.Value;
                    edtFeedbackErteiltUser.ToolTip = "";
                    return;
                }
            }

            KissLookupDialog dlg = new KissLookupDialog();
            e.Cancel = !dlg.SearchData(@"
              SELECT ID$              = UserID,
                     [Kürzel]         = LogonName,
                     [Mitarbeiter/in] = NameVorname,
                     [Org.Einheit]    = OrgUnit,
                     DisplayText$     = DisplayText,
                     OrgUnitID$       = OrgUnitID
              FROM   vwUser
              WHERE  DisplayText LIKE '%' + {0} + '%'
              ORDER BY NameVorname",
              SearchString,
              e.ButtonClicked, null, null, null);

            if (!e.Cancel)
            {
                qryFaVoranmeldung["FeedbackErteiltUserID"] = dlg[0];
                qryFaVoranmeldung["FeedbackErteiltUser"] = dlg[4];
                edtFeedbackErteiltUser.ToolTip = Utils.ConvertToString(dlg[4]);
            }
        }

        private void edtFeedbackUser_UserModifiedFld(object sender, KiSS4.Gui.UserModifiedFldEventArgs e)
        {
            // Letzte Bearbeitung
            // 15.02.2008 : sozheo : Dialog-SQL jetzt nach Norm
            // -------------------------------------------------------------

            if (!edtFeedbackUser.UserModified) return;

            string SearchString = edtFeedbackUser.Text.Replace("*", "%").Replace("?", "_").Replace(" ", "%");

            if (DBUtil.IsEmpty(SearchString))
            {
                if (e.ButtonClicked)
                    SearchString = "%";
                else
                {
                    qryFaVoranmeldung["FeedbackUserID"] = DBNull.Value;
                    qryFaVoranmeldung["FeedbackUser"] = DBNull.Value;
                    edtFeedbackUser.ToolTip = "";
                    return;
                }
            }

            KissLookupDialog dlg = new KissLookupDialog();
            e.Cancel = !dlg.SearchData(@"
              SELECT ID$              = UserID,
                     [Kürzel]         = LogonName,
                     [Mitarbeiter/in] = NameVorname,
                     [Org.Einheit]    = OrgUnit,
                     DisplayText$     = DisplayText,
                     OrgUnitID$       = OrgUnitID
              FROM   vwUser
              WHERE  DisplayText LIKE '%' + {0} + '%'
              ORDER BY NameVorname",
              SearchString,
              e.ButtonClicked, null, null, null);

            if (!e.Cancel)
            {
                qryFaVoranmeldung["FeedbackUserID"] = dlg[0];
                qryFaVoranmeldung["FeedbackUser"] = dlg[4];
                edtFeedbackUser.ToolTip = Utils.ConvertToString(dlg[4]);
            }
        }

        private void edtUserName_UserModifiedFld(object sender, KiSS4.Gui.UserModifiedFldEventArgs e)
        {
            // Letzte Bearbeitung
            // 15.02.2008 : sozheo : Dialog-SQL jetzt nach Norm
            // -------------------------------------------------------------

            if (!edtUserName.UserModified) return;

            string SearchString = edtUserName.Text.Replace("*", "%").Replace("?", "_").Replace(" ", "%");

            if (DBUtil.IsEmpty(SearchString))
            {
                if (e.ButtonClicked)
                    SearchString = "%";
                else
                {
                    qryFaVoranmeldung["UserID"] = DBNull.Value;
                    qryFaVoranmeldung["UserName"] = DBNull.Value;
                    edtUserName.ToolTip = "";
                    return;
                }
            }

            KissLookupDialog dlg = new KissLookupDialog();
            e.Cancel = !dlg.SearchData(@"
              SELECT ID$              = UserID,
                     [Kürzel]         = LogonName,
                     [Mitarbeiter/in] = NameVorname,
                     [Org.Einheit]    = OrgUnit,
                     DisplayText$     = DisplayText,
                     OrgUnitID$       = OrgUnitID
              FROM   vwUser
              WHERE  DisplayText LIKE '%' + {0} + '%'
              ORDER BY NameVorname",
              SearchString,
              e.ButtonClicked, null, null, null);

            if (!e.Cancel)
            {
                qryFaVoranmeldung["UserID"] = dlg[0];
                qryFaVoranmeldung["UserName"] = dlg[4];
                edtUserName.ToolTip = Utils.ConvertToString(dlg[4]);
            }
        }

        private void qryFaVoranmeldung_AfterFill(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 05.02.2008 : sozheo : neu
            // ------------------------------------------------------------------

            if (qryFaVoranmeldung.Count == 0) qryFaVoranmeldung_PositionChanged(sender, e);
        }

        private void qryFaVoranmeldung_AfterInsert(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 28.08.2007 : sozheo : Alles neu
            // -------------------------------------------------------------

            qryFaVoranmeldung["UserID"] = Session.User.UserID;
            qryFaVoranmeldung["FaLeistungID"] = faLeistungID;
            DateTime d1 = DateTime.Today;
            qryFaVoranmeldung["Datum"] = d1;
            DateTime d2 = d1.AddMonths(1);
            qryFaVoranmeldung["FeedbackDatumBis"] = d2;
            qryFaVoranmeldung["FeedbackErledigt"] = 0;
        }

        private void qryFaVoranmeldung_AfterPost(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 05.02.2008 : sozheo : Refresh des Tree eingefügt
            // ------------------------------------------------------------------

            // Navigator Trees aktualisieren:
            FormController.SendMessage("FrmFall", "Action", "RefreshTree");
        }

        private void qryFaVoranmeldung_BeforePost(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 28.08.2007 : sozheo : Alles neu
            // 03.10.2007 : sozheo : Datumskontrolle noch eingefügt
            // 27.11.2007 : sozheo : Feedback-Erteilt-am automatisch setzen
            // -------------------------------------------------------------

            DBUtil.CheckNotNullField(edtDatum, lblDatum.Text);
            DBUtil.CheckNotNullField(edtUserName, lblUserName.Text);
            DBUtil.CheckNotNullField(edtStelleTypCode, lblStelleTypCode.Text);

            // Kontrollieren, dass Datum von kleiner als Datum bis ist:
            if (!DBUtil.IsEmpty(qryFaVoranmeldung["Datum"]) && !DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackDatumBis"]))
            {
                if ((DateTime)qryFaVoranmeldung["Datum"] >= (DateTime)qryFaVoranmeldung["FeedbackDatumBis"])
                {
                    KissMsg.ShowInfo("CtlFaVoranmeldung", "DatumsFehler",
                      "Das Datum muss kleiner sein als das Feedback-Datum.");
                    throw new KissCancelException();
                }
            }

            /*
            // Feedback-Erteilt-am automatisch setzen:
            if (
              DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackErteiltAm"]) &&
              (!DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackDatumBis"])) &&
              (!DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackUserID"]))
            ) qryFaVoranmeldung["FeedbackErteiltAm"] = DateTime.Today;
            */

            // Wenn Feedback erteilt und Datum ausgefüllt ist muss zwingend der Abschlussgrund ausgewählt werden.
            if (
                !DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackErteiltAm"]) ||
                !DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackErteiltUser"]) ||
                !DBUtil.IsEmpty(qryFaVoranmeldung["FaVoranmeldungAbschlussgrundCode"])
            )
            {
                DBUtil.CheckNotNullField(edtFeedbackErteiltAm, lblFeedbackErteiltAm.Text);
                DBUtil.CheckNotNullField(edtFeedbackErteiltUser, lblFeedbackErteiltUser.Text);
                DBUtil.CheckNotNullField(edtAbschlussGrund, lblAbschlussGrund.Text);
            }

            if (!DBUtil.IsEmpty(qryFaVoranmeldung["TaskID"])) return;
            if (DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackDatumBis"])) return;
            if (DBUtil.IsEmpty(qryFaVoranmeldung["FeedbackUserID"])) return;

            qryFaVoranmeldung["TaskID"] = DBUtil.ExecuteScalarSQL(@"
                INSERT INTO XTask (TaskTypeCode, Subject, TaskStatusCode, SenderID, TaskSenderCode, ReceiverID, TaskReceiverCode, ExpirationDate, JumpToPath, FaLeistungID)
                  SELECT 5, 'Feedback zur Voranmeldung', 1, {1}, 1, {2}, 1, {3}, {4}, FLE.FaLeistungID
                  FROM FaLeistung  FLE
                  WHERE FaLeistungID = {0}

                SELECT SCOPE_IDENTITY()",
                qryFaVoranmeldung["FaLeistungID"], Session.User.UserID,
                qryFaVoranmeldung["FeedbackUserID"], qryFaVoranmeldung["FeedbackDatumBis"],
                FormController.ConvertToString(FormController.GetMessage("FrmFall", false, "Action", "GetJumpToPath") as System.Collections.Specialized.HybridDictionary));
        }

        private void qryFaVoranmeldung_PositionChanged(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 05.02.2008 : sozheo : neu
            // 05.02.2008 : sozheo : Anzeige user hinzugefügt
            // ------------------------------------------------------------------

            qryFaVoranmeldung.EnableBoundFields(
              qryFaVoranmeldung.CanUpdate &&
              qryFaVoranmeldung.Count > 0 &&
              DBUtil.IsEmpty(qryFaVoranmeldung["LeistungDatumBis"]) &&
              DBUtil.IsEmpty(qryFaVoranmeldung["FaVoranmeldungAbschlussgrundCode"])
            );

            edtUserName.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["UserName"]);
            edtFeedbackUser.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["FeedbackUser"]);
            edtFeedbackErteiltUser.ToolTip = Utils.ConvertToString(qryFaVoranmeldung["FeedbackErteiltUser"]);
        }

        #endregion

        #region Methods

        #region Public Methods

        public void Init(string Name, Image TitleImage, int LeistungID, int ID)
        {
            lblTitle.Text = Name;
            picTitel.Image = TitleImage;
            faLeistungID = LeistungID;
            faVoranmeldungID = ID;

            SqlQuery qry = DBUtil.OpenSQL("select DisplayText from vwUser where UserID = {0}", Session.User.UserID);
            SessionUserName = Utils.ConvertToString(qry["DisplayText"]);

            // Daten öffnen:
            qryFaVoranmeldung.Fill(faVoranmeldungID);
            //if (qryFaVoranmeldung.Count == 0) qryFaVoranmeldung.Insert();
            qryFaVoranmeldung.CanInsert = false;
        }

        #endregion

        #endregion
    }
}
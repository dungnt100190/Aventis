#region Header

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.3053
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#endregion

using System;
using System.Drawing;

using KiSS.DBScheme;

using KiSS4.Common;
using KiSS4.DB;
using KiSS4.Gui;

namespace KiSS4.Inkasso.ZH
{
    public class CtlIkLeistungAlbv : KiSS4.Gui.KissUserControl
    {
        #region Fields

        private KiSS4.Gui.KissButton btnGenerateVGNr;
        private KiSS4.Gui.KissButton btnReopen;
        private KiSS4.Gui.KissCheckEdit checkEditMahnlauf;
        private System.ComponentModel.IContainer components;
        private KiSS4.Gui.KissTextEdit editSAR;
        private KiSS4.Gui.KissLookUpEdit edtAbschlussGrundCode;
        private KiSS4.Gui.KissDateEdit edtDatumBis;
        private KiSS4.Gui.KissDateEdit edtDatumVon;
        private KiSS4.Gui.KissLookUpEdit edtEroeffnungsGrundCode;
        private KiSS4.Gui.KissTextEdit edtFaFallID;
        private KiSS4.Gui.KissTextEdit edtFaLeistungID;
        private KiSS4.Gui.KissButtonEdit edtFallVU;
        private KiSS4.Gui.KissTextEdit edtPscdVertragsgegenstandID;
        private KiSS4.Gui.KissLookUpEdit edtSchuldnerPerson;
        private int FaLeistungID = 0;
        private int FaProzessCode = 0;

        private KiSS4.Gui.KissLabel kissLabel1;

        private KiSS4.Gui.KissLabel kissLabel4;

        private KiSS4.Gui.KissMemoEdit kissMemoEdit2;

        private KiSS4.Gui.KissLabel lblAbschlussGrundCode;

        private KiSS4.Gui.KissLabel lblDatumBis;

        private KiSS4.Gui.KissLabel lblDatumVon;

        private KiSS4.Gui.KissLabel lblEroeffnungsGrundCode;

        private KiSS4.Gui.KissLabel lblFallVU;

        private KiSS4.Gui.KissLabel lblPscdVgId;

        private KiSS4.Gui.KissLabel lblSAR;

        private KiSS4.Gui.KissLabel lblSchuldnerPerson;

        private KiSS4.Gui.KissLabel lblTitel;

        private KiSS4.Gui.KissMemoEdit memAdresse;

        private System.Windows.Forms.PictureBox picTitle;

        private System.Windows.Forms.Panel pnTitle;

        // Letzte Bearbeitung
        // 14.09.2007 : sozheo : Neu gemacht
        // 16.06.2008 : sozheo : E- und A-Grund korrigiert für UB und VU
        // ------------------------------------------------------------------------------------------------
        private string PSCDBelegKey = "ALBV";
        private KiSS4.DB.SqlQuery qryAdresse;
        private KiSS4.DB.SqlQuery qryDatenKontrolle;
        private KiSS4.DB.SqlQuery qryFaLeistung;
        private KiSS4.DB.SqlQuery qryPerson;

        #endregion

        #region Constructors

        public CtlIkLeistungAlbv(Image titelImage, string titelText, int LeistungID, int ProzessCode)
            : this()
        {
            this.picTitle.Image = titelImage;
            this.lblTitel.Text = titelText;
            FaLeistungID = LeistungID;
            FaProzessCode = ProzessCode;

            edtFallVU.Visible = (ProzessCode == 301 || ProzessCode == 304);
            lblFallVU.Visible = edtFallVU.Visible;
            if (ProzessCode == 304) lblFallVU.Text = "Unterhaltsbeiträge für";

            if (ProzessCode == 301 || ProzessCode == 302 || ProzessCode == 304)
            {
                // für W-Modul
                if (ProzessCode == 301)
                    edtEroeffnungsGrundCode.LOVFilter = "WIK_VU";
                else if (ProzessCode == 302)
                    edtEroeffnungsGrundCode.LOVFilter = "WIK_RE";
                else if (ProzessCode == 304)
                    edtEroeffnungsGrundCode.LOVFilter = "WIK_UB";
                else
                    edtEroeffnungsGrundCode.LOVFilter = "WIK";
                edtAbschlussGrundCode.LOVFilter = "WIK";
                PSCDBelegKey = "INKW";
            }
            else if (ProzessCode == 405 || ProzessCode == 408)
            {
                // ALBV Aliment oder Rückforderung ALBV
                edtEroeffnungsGrundCode.LOVFilter = "ALBV";
                edtAbschlussGrundCode.LOVFilter = "ALBV";
            }
            else if (ProzessCode == 406 || ProzessCode == 409)
            {
                // UeBH Aliment oder Rückforderung UeBH
                edtEroeffnungsGrundCode.LOVFilter = "UEBH";
                edtAbschlussGrundCode.LOVFilter = "UEBH";
            }
            else if (ProzessCode == 407 || ProzessCode == 410)
            {
                // UeBH Aliment oder Rückforderung KKBB
                edtEroeffnungsGrundCode.LOVFilter = "KKBB";
                edtAbschlussGrundCode.LOVFilter = "KKBB";
            }
            edtEroeffnungsGrundCode.LOVName = "EroeffnungsGrund";
            edtAbschlussGrundCode.LOVName = "AbschlussGrund";

            //qryPerson.Fill(faLeistungID);

            qryFaLeistung.Fill(LeistungID);
        }

        public CtlIkLeistungAlbv()
        {
            this.InitializeComponent();
        }

        #endregion

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject6 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject5 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject4 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject3 = new DevExpress.Utils.SerializableAppearanceObject();
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject2 = new DevExpress.Utils.SerializableAppearanceObject();
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(CtlIkLeistungAlbv));
            DevExpress.Utils.SerializableAppearanceObject serializableAppearanceObject1 = new DevExpress.Utils.SerializableAppearanceObject();
            this.edtDatumVon = new KiSS4.Gui.KissDateEdit();
            this.qryFaLeistung = new KiSS4.DB.SqlQuery(this.components);
            this.edtEroeffnungsGrundCode = new KiSS4.Gui.KissLookUpEdit();
            this.edtDatumBis = new KiSS4.Gui.KissDateEdit();
            this.edtAbschlussGrundCode = new KiSS4.Gui.KissLookUpEdit();
            this.edtSchuldnerPerson = new KiSS4.Gui.KissLookUpEdit();
            this.qryPerson = new KiSS4.DB.SqlQuery(this.components);
            this.checkEditMahnlauf = new KiSS4.Gui.KissCheckEdit();
            this.lblDatumVon = new KiSS4.Gui.KissLabel();
            this.lblDatumBis = new KiSS4.Gui.KissLabel();
            this.kissMemoEdit2 = new KiSS4.Gui.KissMemoEdit();
            this.pnTitle = new System.Windows.Forms.Panel();
            this.picTitle = new System.Windows.Forms.PictureBox();
            this.lblTitel = new KiSS4.Gui.KissLabel();
            this.lblSAR = new KiSS4.Gui.KissLabel();
            this.editSAR = new KiSS4.Gui.KissTextEdit();
            this.lblEroeffnungsGrundCode = new KiSS4.Gui.KissLabel();
            this.lblAbschlussGrundCode = new KiSS4.Gui.KissLabel();
            this.lblSchuldnerPerson = new KiSS4.Gui.KissLabel();
            this.memAdresse = new KiSS4.Gui.KissMemoEdit();
            this.qryAdresse = new KiSS4.DB.SqlQuery(this.components);
            this.kissLabel4 = new KiSS4.Gui.KissLabel();
            this.btnReopen = new KiSS4.Gui.KissButton();
            this.edtPscdVertragsgegenstandID = new KiSS4.Gui.KissTextEdit();
            this.lblPscdVgId = new KiSS4.Gui.KissLabel();
            this.btnGenerateVGNr = new KiSS4.Gui.KissButton();
            this.edtFallVU = new KiSS4.Gui.KissButtonEdit();
            this.lblFallVU = new KiSS4.Gui.KissLabel();
            this.kissLabel1 = new KiSS4.Gui.KissLabel();
            this.edtFaLeistungID = new KiSS4.Gui.KissTextEdit();
            this.edtFaFallID = new KiSS4.Gui.KissTextEdit();
            this.qryDatenKontrolle = new KiSS4.DB.SqlQuery(this.components);
            ((System.ComponentModel.ISupportInitialize)(this.edtDatumVon.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryFaLeistung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtEroeffnungsGrundCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtEroeffnungsGrundCode.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtDatumBis.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrundCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrundCode.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtSchuldnerPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtSchuldnerPerson.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.checkEditMahnlauf.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatumVon)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatumBis)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissMemoEdit2.Properties)).BeginInit();
            this.pnTitle.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.picTitle)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblTitel)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblSAR)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.editSAR.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblEroeffnungsGrundCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblAbschlussGrundCode)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblSchuldnerPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memAdresse.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryAdresse)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel4)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPscdVertragsgegenstandID.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblPscdVgId)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFallVU.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFallVU)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel1)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFaLeistungID.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFaFallID.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryDatenKontrolle)).BeginInit();
            this.SuspendLayout();
            // 
            // edtDatumVon
            // 
            this.edtDatumVon.DataMember = "DatumVon";
            this.edtDatumVon.DataSource = this.qryFaLeistung;
            this.edtDatumVon.EditValue = null;
            this.edtDatumVon.Location = new System.Drawing.Point(105, 115);
            this.edtDatumVon.Name = "edtDatumVon";
            this.edtDatumVon.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtDatumVon.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtDatumVon.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtDatumVon.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtDatumVon.Properties.Appearance.Options.UseBackColor = true;
            this.edtDatumVon.Properties.Appearance.Options.UseBorderColor = true;
            this.edtDatumVon.Properties.Appearance.Options.UseFont = true;
            this.edtDatumVon.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject6.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject6.Options.UseBackColor = true;
            this.edtDatumVon.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph, "", 8, true, true, false, DevExpress.Utils.HorzAlignment.Center, ((System.Drawing.Image)(resources.GetObject("edtDatumVon.Properties.Buttons"))), new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject6)});
            this.edtDatumVon.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtDatumVon.Properties.ShowToday = false;
            this.edtDatumVon.Size = new System.Drawing.Size(100, 24);
            this.edtDatumVon.TabIndex = 0;
            // 
            // qryFaLeistung
            // 
            this.qryFaLeistung.CanDelete = true;
            this.qryFaLeistung.CanUpdate = true;
            this.qryFaLeistung.HostControl = this;
            this.qryFaLeistung.SelectStatement = resources.GetString("qryFaLeistung.SelectStatement");
            this.qryFaLeistung.TableName = "FaLeistung";
            this.qryFaLeistung.AfterFill += new System.EventHandler(this.qryFaLeistung_AfterFill);
            this.qryFaLeistung.BeforePost += new System.EventHandler(this.qryFaLeistung_BeforePost);
            this.qryFaLeistung.AfterPost += new System.EventHandler(this.qryFaLeistung_AfterPost);
            this.qryFaLeistung.BeforeDeleteQuestion += new System.EventHandler(this.qryFaLeistung_BeforeDeleteQuestion);
            this.qryFaLeistung.AfterDelete += new System.EventHandler(this.qryFaLeistung_AfterDelete);
            this.qryFaLeistung.PositionChanged += new System.EventHandler(this.qryFaLeistung_PositionChanged);
            // 
            // edtEroeffnungsGrundCode
            // 
            this.edtEroeffnungsGrundCode.DataMember = "EroeffnungsGrundCode";
            this.edtEroeffnungsGrundCode.DataSource = this.qryFaLeistung;
            this.edtEroeffnungsGrundCode.Location = new System.Drawing.Point(317, 116);
            this.edtEroeffnungsGrundCode.LOVFilter = "ALBV";
            this.edtEroeffnungsGrundCode.LOVName = "EroeffnungsGrund";
            this.edtEroeffnungsGrundCode.Name = "edtEroeffnungsGrundCode";
            this.edtEroeffnungsGrundCode.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtEroeffnungsGrundCode.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtEroeffnungsGrundCode.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtEroeffnungsGrundCode.Properties.Appearance.Options.UseBackColor = true;
            this.edtEroeffnungsGrundCode.Properties.Appearance.Options.UseBorderColor = true;
            this.edtEroeffnungsGrundCode.Properties.Appearance.Options.UseFont = true;
            this.edtEroeffnungsGrundCode.Properties.AppearanceDropDown.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.edtEroeffnungsGrundCode.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.edtEroeffnungsGrundCode.Properties.AppearanceDropDown.Options.UseBackColor = true;
            this.edtEroeffnungsGrundCode.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtEroeffnungsGrundCode.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject5.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject5.Options.UseBackColor = true;
            this.edtEroeffnungsGrundCode.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject5)});
            this.edtEroeffnungsGrundCode.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtEroeffnungsGrundCode.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
            new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Text", null, 75)});
            this.edtEroeffnungsGrundCode.Properties.DisplayMember = "Text";
            this.edtEroeffnungsGrundCode.Properties.NullText = "";
            this.edtEroeffnungsGrundCode.Properties.ShowFooter = false;
            this.edtEroeffnungsGrundCode.Properties.ShowHeader = false;
            this.edtEroeffnungsGrundCode.Properties.ValueMember = "Code";
            this.edtEroeffnungsGrundCode.Size = new System.Drawing.Size(323, 24);
            this.edtEroeffnungsGrundCode.TabIndex = 1;
            // 
            // edtDatumBis
            // 
            this.edtDatumBis.DataMember = "DatumBis";
            this.edtDatumBis.DataSource = this.qryFaLeistung;
            this.edtDatumBis.EditValue = null;
            this.edtDatumBis.Location = new System.Drawing.Point(105, 145);
            this.edtDatumBis.Name = "edtDatumBis";
            this.edtDatumBis.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtDatumBis.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtDatumBis.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtDatumBis.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtDatumBis.Properties.Appearance.Options.UseBackColor = true;
            this.edtDatumBis.Properties.Appearance.Options.UseBorderColor = true;
            this.edtDatumBis.Properties.Appearance.Options.UseFont = true;
            this.edtDatumBis.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject4.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject4.Options.UseBackColor = true;
            this.edtDatumBis.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph, "", 8, true, true, false, DevExpress.Utils.HorzAlignment.Center, ((System.Drawing.Image)(resources.GetObject("edtDatumBis.Properties.Buttons"))), new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject4)});
            this.edtDatumBis.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtDatumBis.Properties.ShowToday = false;
            this.edtDatumBis.Size = new System.Drawing.Size(100, 24);
            this.edtDatumBis.TabIndex = 2;
            // 
            // edtAbschlussGrundCode
            // 
            this.edtAbschlussGrundCode.DataMember = "AbschlussGrundCode";
            this.edtAbschlussGrundCode.DataSource = this.qryFaLeistung;
            this.edtAbschlussGrundCode.Location = new System.Drawing.Point(317, 146);
            this.edtAbschlussGrundCode.LOVFilter = "ALBV";
            this.edtAbschlussGrundCode.LOVName = "AbschlussGrund";
            this.edtAbschlussGrundCode.Name = "edtAbschlussGrundCode";
            this.edtAbschlussGrundCode.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtAbschlussGrundCode.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtAbschlussGrundCode.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtAbschlussGrundCode.Properties.Appearance.Options.UseBackColor = true;
            this.edtAbschlussGrundCode.Properties.Appearance.Options.UseBorderColor = true;
            this.edtAbschlussGrundCode.Properties.Appearance.Options.UseFont = true;
            this.edtAbschlussGrundCode.Properties.AppearanceDropDown.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.edtAbschlussGrundCode.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.edtAbschlussGrundCode.Properties.AppearanceDropDown.Options.UseBackColor = true;
            this.edtAbschlussGrundCode.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtAbschlussGrundCode.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject3.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject3.Options.UseBackColor = true;
            this.edtAbschlussGrundCode.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject3)});
            this.edtAbschlussGrundCode.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtAbschlussGrundCode.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
            new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Text", null, 75)});
            this.edtAbschlussGrundCode.Properties.DisplayMember = "Text";
            this.edtAbschlussGrundCode.Properties.NullText = "";
            this.edtAbschlussGrundCode.Properties.ShowFooter = false;
            this.edtAbschlussGrundCode.Properties.ShowHeader = false;
            this.edtAbschlussGrundCode.Properties.ValueMember = "Code";
            this.edtAbschlussGrundCode.Size = new System.Drawing.Size(323, 24);
            this.edtAbschlussGrundCode.TabIndex = 3;
            // 
            // edtSchuldnerPerson
            // 
            this.edtSchuldnerPerson.DataMember = "SchuldnerBaPersonID";
            this.edtSchuldnerPerson.DataSource = this.qryFaLeistung;
            this.edtSchuldnerPerson.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.edtSchuldnerPerson.Location = new System.Drawing.Point(385, 222);
            this.edtSchuldnerPerson.Name = "edtSchuldnerPerson";
            this.edtSchuldnerPerson.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtSchuldnerPerson.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtSchuldnerPerson.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtSchuldnerPerson.Properties.Appearance.Options.UseBackColor = true;
            this.edtSchuldnerPerson.Properties.Appearance.Options.UseBorderColor = true;
            this.edtSchuldnerPerson.Properties.Appearance.Options.UseFont = true;
            this.edtSchuldnerPerson.Properties.AppearanceDropDown.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.edtSchuldnerPerson.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.edtSchuldnerPerson.Properties.AppearanceDropDown.Options.UseBackColor = true;
            this.edtSchuldnerPerson.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtSchuldnerPerson.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject2.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject2.Options.UseBackColor = true;
            this.edtSchuldnerPerson.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject2)});
            this.edtSchuldnerPerson.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtSchuldnerPerson.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
            new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Text", "Person", 20, DevExpress.Utils.FormatType.None, "", true, DevExpress.Utils.HorzAlignment.Default, DevExpress.Data.ColumnSortOrder.None)});
            this.edtSchuldnerPerson.Properties.DataSource = this.qryPerson;
            this.edtSchuldnerPerson.Properties.DisplayMember = "Text";
            this.edtSchuldnerPerson.Properties.NullText = "";
            this.edtSchuldnerPerson.Properties.ReadOnly = true;
            this.edtSchuldnerPerson.Properties.ShowFooter = false;
            this.edtSchuldnerPerson.Properties.ShowHeader = false;
            this.edtSchuldnerPerson.Properties.ValueMember = "Code";
            this.edtSchuldnerPerson.Size = new System.Drawing.Size(109, 24);
            this.edtSchuldnerPerson.TabIndex = 4;
            this.edtSchuldnerPerson.Visible = false;
            this.edtSchuldnerPerson.CloseUp += new DevExpress.XtraEditors.Controls.CloseUpEventHandler(this.edtSchuldnerPerson_CloseUp);
            // 
            // qryPerson
            // 
            this.qryPerson.HostControl = this;
            this.qryPerson.SelectStatement = resources.GetString("qryPerson.SelectStatement");
            // 
            // checkEditMahnlauf
            // 
            this.checkEditMahnlauf.DataMember = "IkSchuldnerMahnen";
            this.checkEditMahnlauf.DataSource = this.qryFaLeistung;
            this.checkEditMahnlauf.Location = new System.Drawing.Point(385, 197);
            this.checkEditMahnlauf.Name = "checkEditMahnlauf";
            this.checkEditMahnlauf.Properties.Appearance.BackColor = System.Drawing.Color.Transparent;
            this.checkEditMahnlauf.Properties.Appearance.Options.UseBackColor = true;
            this.checkEditMahnlauf.Properties.Caption = "Schuldner mahnen";
            this.checkEditMahnlauf.Properties.Name = "checkEditMahnlauf.Properties";
            this.checkEditMahnlauf.Size = new System.Drawing.Size(193, 19);
            this.checkEditMahnlauf.TabIndex = 5;
            // 
            // lblDatumVon
            // 
            this.lblDatumVon.Location = new System.Drawing.Point(5, 115);
            this.lblDatumVon.Name = "lblDatumVon";
            this.lblDatumVon.Size = new System.Drawing.Size(81, 24);
            this.lblDatumVon.TabIndex = 5;
            this.lblDatumVon.Text = "Datum von";
            this.lblDatumVon.UseCompatibleTextRendering = true;
            // 
            // lblDatumBis
            // 
            this.lblDatumBis.Location = new System.Drawing.Point(5, 146);
            this.lblDatumBis.Name = "lblDatumBis";
            this.lblDatumBis.Size = new System.Drawing.Size(89, 24);
            this.lblDatumBis.TabIndex = 6;
            this.lblDatumBis.Text = "Datum bis";
            this.lblDatumBis.UseCompatibleTextRendering = true;
            // 
            // kissMemoEdit2
            // 
            this.kissMemoEdit2.DataMember = "Bemerkung";
            this.kissMemoEdit2.DataSource = this.qryFaLeistung;
            this.kissMemoEdit2.Location = new System.Drawing.Point(105, 342);
            this.kissMemoEdit2.Name = "kissMemoEdit2";
            this.kissMemoEdit2.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.kissMemoEdit2.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.kissMemoEdit2.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.kissMemoEdit2.Properties.Appearance.Options.UseBackColor = true;
            this.kissMemoEdit2.Properties.Appearance.Options.UseBorderColor = true;
            this.kissMemoEdit2.Properties.Appearance.Options.UseFont = true;
            this.kissMemoEdit2.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.kissMemoEdit2.Size = new System.Drawing.Size(535, 79);
            this.kissMemoEdit2.TabIndex = 7;
            // 
            // pnTitle
            // 
            this.pnTitle.Controls.Add(this.picTitle);
            this.pnTitle.Controls.Add(this.lblTitel);
            this.pnTitle.Dock = System.Windows.Forms.DockStyle.Top;
            this.pnTitle.Location = new System.Drawing.Point(0, 0);
            this.pnTitle.Name = "pnTitle";
            this.pnTitle.Size = new System.Drawing.Size(648, 40);
            this.pnTitle.TabIndex = 9;
            // 
            // picTitle
            // 
            this.picTitle.Location = new System.Drawing.Point(10, 9);
            this.picTitle.Name = "picTitle";
            this.picTitle.Size = new System.Drawing.Size(25, 20);
            this.picTitle.TabIndex = 1;
            this.picTitle.TabStop = false;
            // 
            // lblTitel
            // 
            this.lblTitel.LabelStyle = KiSS4.Gui.LabelStyleType.TitleLabel;
            this.lblTitel.Location = new System.Drawing.Point(35, 10);
            this.lblTitel.Name = "lblTitel";
            this.lblTitel.Size = new System.Drawing.Size(500, 20);
            this.lblTitel.TabIndex = 1;
            this.lblTitel.Text = "Alimenten Inkasso";
            this.lblTitel.UseCompatibleTextRendering = true;
            // 
            // lblSAR
            // 
            this.lblSAR.Location = new System.Drawing.Point(5, 85);
            this.lblSAR.Name = "lblSAR";
            this.lblSAR.Size = new System.Drawing.Size(81, 24);
            this.lblSAR.TabIndex = 11;
            this.lblSAR.Text = "zuständige SB";
            this.lblSAR.UseCompatibleTextRendering = true;
            // 
            // editSAR
            // 
            this.editSAR.DataMember = "LogonName";
            this.editSAR.DataSource = this.qryFaLeistung;
            this.editSAR.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.editSAR.Location = new System.Drawing.Point(105, 85);
            this.editSAR.Name = "editSAR";
            this.editSAR.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.editSAR.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.editSAR.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.editSAR.Properties.Appearance.Options.UseBackColor = true;
            this.editSAR.Properties.Appearance.Options.UseBorderColor = true;
            this.editSAR.Properties.Appearance.Options.UseFont = true;
            this.editSAR.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.editSAR.Properties.Name = "editSAR.Properties";
            this.editSAR.Properties.ReadOnly = true;
            this.editSAR.Size = new System.Drawing.Size(100, 24);
            this.editSAR.TabIndex = 12;
            this.editSAR.TabStop = false;
            // 
            // lblEroeffnungsGrundCode
            // 
            this.lblEroeffnungsGrundCode.Location = new System.Drawing.Point(217, 116);
            this.lblEroeffnungsGrundCode.Name = "lblEroeffnungsGrundCode";
            this.lblEroeffnungsGrundCode.Size = new System.Drawing.Size(100, 23);
            this.lblEroeffnungsGrundCode.TabIndex = 13;
            this.lblEroeffnungsGrundCode.Text = "Eröffnungsgrund";
            this.lblEroeffnungsGrundCode.UseCompatibleTextRendering = true;
            // 
            // lblAbschlussGrundCode
            // 
            this.lblAbschlussGrundCode.Location = new System.Drawing.Point(217, 146);
            this.lblAbschlussGrundCode.Name = "lblAbschlussGrundCode";
            this.lblAbschlussGrundCode.Size = new System.Drawing.Size(100, 23);
            this.lblAbschlussGrundCode.TabIndex = 14;
            this.lblAbschlussGrundCode.Text = "Abschlussgrund";
            this.lblAbschlussGrundCode.UseCompatibleTextRendering = true;
            // 
            // lblSchuldnerPerson
            // 
            this.lblSchuldnerPerson.Location = new System.Drawing.Point(5, 193);
            this.lblSchuldnerPerson.Name = "lblSchuldnerPerson";
            this.lblSchuldnerPerson.Size = new System.Drawing.Size(78, 24);
            this.lblSchuldnerPerson.TabIndex = 16;
            this.lblSchuldnerPerson.Text = "Schuldner/in";
            this.lblSchuldnerPerson.UseCompatibleTextRendering = true;
            // 
            // memAdresse
            // 
            this.memAdresse.DataMember = "Adresse";
            this.memAdresse.DataSource = this.qryAdresse;
            this.memAdresse.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memAdresse.Location = new System.Drawing.Point(105, 197);
            this.memAdresse.Name = "memAdresse";
            this.memAdresse.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memAdresse.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memAdresse.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memAdresse.Properties.Appearance.Options.UseBackColor = true;
            this.memAdresse.Properties.Appearance.Options.UseBorderColor = true;
            this.memAdresse.Properties.Appearance.Options.UseFont = true;
            this.memAdresse.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memAdresse.Properties.ReadOnly = true;
            this.memAdresse.Size = new System.Drawing.Size(254, 119);
            this.memAdresse.TabIndex = 17;
            this.memAdresse.TabStop = false;
            // 
            // qryAdresse
            // 
            this.qryAdresse.HostControl = this;
            this.qryAdresse.SelectStatement = resources.GetString("qryAdresse.SelectStatement");
            // 
            // kissLabel4
            // 
            this.kissLabel4.Location = new System.Drawing.Point(5, 342);
            this.kissLabel4.Name = "kissLabel4";
            this.kissLabel4.Size = new System.Drawing.Size(75, 24);
            this.kissLabel4.TabIndex = 32;
            this.kissLabel4.Text = "Bemerkung";
            this.kissLabel4.UseCompatibleTextRendering = true;
            // 
            // btnReopen
            // 
            this.btnReopen.FlatStyle = System.Windows.Forms.FlatStyle.Flat;
            this.btnReopen.Location = new System.Drawing.Point(106, 440);
            this.btnReopen.Name = "btnReopen";
            this.btnReopen.Size = new System.Drawing.Size(151, 24);
            this.btnReopen.TabIndex = 33;
            this.btnReopen.Text = "Fall wieder öffnen";
            this.btnReopen.UseCompatibleTextRendering = true;
            this.btnReopen.UseVisualStyleBackColor = false;
            this.btnReopen.Click += new System.EventHandler(this.btnReopen_Click);
            // 
            // edtPscdVertragsgegenstandID
            // 
            this.edtPscdVertragsgegenstandID.DataMember = "PscdVertragsgegenstandID";
            this.edtPscdVertragsgegenstandID.DataSource = this.qryFaLeistung;
            this.edtPscdVertragsgegenstandID.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.edtPscdVertragsgegenstandID.Location = new System.Drawing.Point(565, 85);
            this.edtPscdVertragsgegenstandID.Name = "edtPscdVertragsgegenstandID";
            this.edtPscdVertragsgegenstandID.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtPscdVertragsgegenstandID.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtPscdVertragsgegenstandID.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtPscdVertragsgegenstandID.Properties.Appearance.Options.UseBackColor = true;
            this.edtPscdVertragsgegenstandID.Properties.Appearance.Options.UseBorderColor = true;
            this.edtPscdVertragsgegenstandID.Properties.Appearance.Options.UseFont = true;
            this.edtPscdVertragsgegenstandID.Properties.Appearance.Options.UseTextOptions = true;
            this.edtPscdVertragsgegenstandID.Properties.Appearance.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Center;
            this.edtPscdVertragsgegenstandID.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtPscdVertragsgegenstandID.Properties.ReadOnly = true;
            this.edtPscdVertragsgegenstandID.Size = new System.Drawing.Size(75, 24);
            this.edtPscdVertragsgegenstandID.TabIndex = 34;
            // 
            // lblPscdVgId
            // 
            this.lblPscdVgId.Location = new System.Drawing.Point(406, 85);
            this.lblPscdVgId.Name = "lblPscdVgId";
            this.lblPscdVgId.Size = new System.Drawing.Size(153, 24);
            this.lblPscdVgId.TabIndex = 35;
            this.lblPscdVgId.Text = "PSCD Vertragsgegenstand Nr";
            this.lblPscdVgId.UseCompatibleTextRendering = true;
            // 
            // btnGenerateVGNr
            // 
            this.btnGenerateVGNr.FlatStyle = System.Windows.Forms.FlatStyle.Flat;
            this.btnGenerateVGNr.Location = new System.Drawing.Point(317, 85);
            this.btnGenerateVGNr.Name = "btnGenerateVGNr";
            this.btnGenerateVGNr.Size = new System.Drawing.Size(83, 24);
            this.btnGenerateVGNr.TabIndex = 36;
            this.btnGenerateVGNr.Text = "VG-Nr lösen";
            this.btnGenerateVGNr.UseCompatibleTextRendering = true;
            this.btnGenerateVGNr.UseVisualStyleBackColor = false;
            this.btnGenerateVGNr.Click += new System.EventHandler(this.btnGenerateVGNr_Click);
            // 
            // edtFallVU
            // 
            this.edtFallVU.DataMember = "VUFallName";
            this.edtFallVU.DataSource = this.qryFaLeistung;
            this.edtFallVU.Location = new System.Drawing.Point(380, 292);
            this.edtFallVU.Name = "edtFallVU";
            this.edtFallVU.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtFallVU.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFallVU.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFallVU.Properties.Appearance.Options.UseBackColor = true;
            this.edtFallVU.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFallVU.Properties.Appearance.Options.UseFont = true;
            this.edtFallVU.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            serializableAppearanceObject1.BackColor = System.Drawing.Color.Bisque;
            serializableAppearanceObject1.Options.UseBackColor = true;
            this.edtFallVU.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
            new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Ellipsis, "", -1, true, true, false, DevExpress.Utils.HorzAlignment.Center, null, new DevExpress.Utils.KeyShortcut(System.Windows.Forms.Keys.None), serializableAppearanceObject1)});
            this.edtFallVU.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtFallVU.Size = new System.Drawing.Size(260, 24);
            this.edtFallVU.TabIndex = 37;
            this.edtFallVU.UserModifiedFld += new KiSS4.Gui.UserModifiedFldEventHandler(this.edtFallVU_UserModifiedFld);
            // 
            // lblFallVU
            // 
            this.lblFallVU.Location = new System.Drawing.Point(378, 263);
            this.lblFallVU.Name = "lblFallVU";
            this.lblFallVU.Size = new System.Drawing.Size(262, 24);
            this.lblFallVU.TabIndex = 38;
            this.lblFallVU.Text = "Verwandtenunterstützung für ";
            this.lblFallVU.UseCompatibleTextRendering = true;
            // 
            // kissLabel1
            // 
            this.kissLabel1.Location = new System.Drawing.Point(5, 55);
            this.kissLabel1.Name = "kissLabel1";
            this.kissLabel1.Size = new System.Drawing.Size(94, 24);
            this.kissLabel1.TabIndex = 39;
            this.kissLabel1.Text = "Leistung / Fall";
            this.kissLabel1.UseCompatibleTextRendering = true;
            // 
            // edtFaLeistungID
            // 
            this.edtFaLeistungID.DataMember = "FaLeistungID";
            this.edtFaLeistungID.DataSource = this.qryFaLeistung;
            this.edtFaLeistungID.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.edtFaLeistungID.Location = new System.Drawing.Point(105, 55);
            this.edtFaLeistungID.Name = "edtFaLeistungID";
            this.edtFaLeistungID.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtFaLeistungID.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFaLeistungID.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFaLeistungID.Properties.Appearance.Options.UseBackColor = true;
            this.edtFaLeistungID.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFaLeistungID.Properties.Appearance.Options.UseFont = true;
            this.edtFaLeistungID.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtFaLeistungID.Properties.ReadOnly = true;
            this.edtFaLeistungID.Size = new System.Drawing.Size(100, 24);
            this.edtFaLeistungID.TabIndex = 40;
            // 
            // edtFaFallID
            // 
            this.edtFaFallID.DataMember = "FaFallID";
            this.edtFaFallID.DataSource = this.qryFaLeistung;
            this.edtFaFallID.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.edtFaFallID.Location = new System.Drawing.Point(211, 55);
            this.edtFaFallID.Name = "edtFaFallID";
            this.edtFaFallID.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtFaFallID.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtFaFallID.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtFaFallID.Properties.Appearance.Options.UseBackColor = true;
            this.edtFaFallID.Properties.Appearance.Options.UseBorderColor = true;
            this.edtFaFallID.Properties.Appearance.Options.UseFont = true;
            this.edtFaFallID.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtFaFallID.Properties.ReadOnly = true;
            this.edtFaFallID.Size = new System.Drawing.Size(100, 24);
            this.edtFaFallID.TabIndex = 41;
            // 
            // qryDatenKontrolle
            // 
            this.qryDatenKontrolle.HostControl = this;
            this.qryDatenKontrolle.SelectStatement = resources.GetString("qryDatenKontrolle.SelectStatement");
            // 
            // CtlIkLeistungAlbv
            // 
            this.ActiveSQLQuery = this.qryFaLeistung;
            this.Controls.Add(this.edtFaFallID);
            this.Controls.Add(this.edtFaLeistungID);
            this.Controls.Add(this.kissLabel1);
            this.Controls.Add(this.lblFallVU);
            this.Controls.Add(this.edtFallVU);
            this.Controls.Add(this.btnGenerateVGNr);
            this.Controls.Add(this.lblPscdVgId);
            this.Controls.Add(this.edtPscdVertragsgegenstandID);
            this.Controls.Add(this.btnReopen);
            this.Controls.Add(this.kissLabel4);
            this.Controls.Add(this.memAdresse);
            this.Controls.Add(this.lblSchuldnerPerson);
            this.Controls.Add(this.lblAbschlussGrundCode);
            this.Controls.Add(this.lblEroeffnungsGrundCode);
            this.Controls.Add(this.editSAR);
            this.Controls.Add(this.lblSAR);
            this.Controls.Add(this.pnTitle);
            this.Controls.Add(this.kissMemoEdit2);
            this.Controls.Add(this.lblDatumBis);
            this.Controls.Add(this.lblDatumVon);
            this.Controls.Add(this.checkEditMahnlauf);
            this.Controls.Add(this.edtSchuldnerPerson);
            this.Controls.Add(this.edtAbschlussGrundCode);
            this.Controls.Add(this.edtDatumBis);
            this.Controls.Add(this.edtEroeffnungsGrundCode);
            this.Controls.Add(this.edtDatumVon);
            this.Name = "CtlIkLeistungAlbv";
            this.Size = new System.Drawing.Size(648, 480);
            ((System.ComponentModel.ISupportInitialize)(this.edtDatumVon.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryFaLeistung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtEroeffnungsGrundCode.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtEroeffnungsGrundCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtDatumBis.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrundCode.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtAbschlussGrundCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtSchuldnerPerson.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtSchuldnerPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.checkEditMahnlauf.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatumVon)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatumBis)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissMemoEdit2.Properties)).EndInit();
            this.pnTitle.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.picTitle)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblTitel)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblSAR)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.editSAR.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblEroeffnungsGrundCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblAbschlussGrundCode)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblSchuldnerPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memAdresse.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryAdresse)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel4)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPscdVertragsgegenstandID.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblPscdVgId)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFallVU.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblFallVU)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.kissLabel1)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFaLeistungID.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtFaFallID.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryDatenKontrolle)).EndInit();
            this.ResumeLayout(false);

        }

        #endregion

        #region Dispose

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        protected override void Dispose(bool disposing)
        {
            if (disposing)
            {
                if ((components != null))
                {
                    components.Dispose();
                }
            }
            base.Dispose(disposing);
        }

        #endregion

        #region Private Properties

        // Letzte Bearbeitung
        // 03.04.2008 : sozheo : Neu
        // ------------------------------------------------------------------------------------------------
        private bool CanEdit
        {
            get
            {
                return (
                  qryFaLeistung.Count > 0 &&
                  qryFaLeistung.CanUpdate
                );
            }
        }

        #endregion

        #region Private Methods

        private void btnGenerateVGNr_Click(object sender, System.EventArgs e)
        {
            if (DBUtil.IsEmpty(qryFaLeistung["PscdVertragsgegenstandID"]))
            {
                if (!qryFaLeistung.Post()) return;
                qryFaLeistung["PscdVertragsgegenstandID"] = (long)DBUtil.ExecuteScalarSQLThrowingException(
                  string.Format("EXEC spKbGetBelegNr '{0}'", PSCDBelegKey)
                );
                btnGenerateVGNr.Visible = false;
                qryFaLeistung.Post();
            }
        }

        private void btnReopen_Click(object sender, System.EventArgs e)
        {
            // EndDatum ist leer, d.h. die Leistung ist aktiv. Wir müssen prüfen, ob es auch ein offener Fall gibt, sonst darf das Bis-Datum nicht leer sein
            if (FaProzessCode == 301 || FaProzessCode == 302 || FaProzessCode == 304)
            {
                // W-Leistung => Es muss eine aktive F-Leistung vorhanden sein
                object obj = DBUtil.ExecuteScalarSQL("SELECT FaFallID FROM FaLeistung WHERE FaFallID = {0} AND FaProzessCode = 200 AND DatumBis IS NULL", qryFaLeistung["FaFallID"]);

                if (obj == null)
                {
                    KissMsg.ShowInfo("Ohne aktive Fallführung kann diese Leistung nicht wieder eröffnet werden.");
                    return;
                }
            }
            else
            {
                // A-Leistung => Es muss eine aktive FA-Leistung vorhanden sein
                object obj = DBUtil.ExecuteScalarSQL("SELECT FaFallID FROM FaLeistung WHERE FaFallID = {0} AND FaProzessCode = 201 AND DatumBis IS NULL", qryFaLeistung["FaFallID"]);

                if (obj == null)
                {
                    KissMsg.ShowInfo("Ohne aktive Fallführung Alimentenstelle kann diese Leistung nicht wieder eröffnet werden.");
                    return;
                }
            }

            qryFaLeistung["DatumBis"] = DBNull.Value;
            qryFaLeistung["AbschlussGrundCode"] = DBNull.Value;
            qryFaLeistung.Post("FaLeistung");

            FormController.SendMessage("FrmFall", "Action", "RefreshTree");

            //qryFaLeistung.CanUpdate = true;
            SetEditMode();
        }

        private void edtFallVU_UserModifiedFld(object sender, KiSS4.Gui.UserModifiedFldEventArgs e)
        {
            // Letzte Bearbeitung
            // 01.06.2008 : sozheo : neu
            // -------------------------------------------------------------

            string SearchString = edtFallVU.Text.Replace("*", "%").Replace("?", "_").Replace(" ", "%");

            if (DBUtil.IsEmpty(SearchString))
            {
                if (e.ButtonClicked)
                {
                    SearchString = "";
                }
                else
                {
                    qryFaLeistung["VUFaFallID"] = DBNull.Value;
                    qryFaLeistung["VUFallName"] = DBNull.Value;
                    //edtFallVU.LookupID = DBNull.Value;
                    //edtFallVU.EditValue = DBNull.Value;
                    edtFallVU.ToolTip = "";
                    return;
                }
            }

            KissLookupDialog dlg = new KissLookupDialog();
            e.Cancel = !dlg.SearchData(@"
              SELECT FaFallID$ = F.FaFallID,
                     [Datum Von] = F.DatumVon,
                     [Fallträger] = P.NameVorname,
                     [Geb.] = CONVERT(VARCHAR, P.Geburtsdatum, 104),
                     [Fall-Nr.] = F.FaFallID,
                     [Kürzel] = U.LogonName,
                     [Mitarbeiter/in] = U.NameVorname,
                     [Org.Einheit]    = U.OrgUnit,
                     [Display$] = P.NameVorname
                       +IsNull(', geb. '+Convert(varchar, P.Geburtsdatum, 104), '')
                       +IsNull(', Fall '+Convert(varchar, F.FaFallID), '')
              FROM dbo.FaFall F with(readuncommitted)
              LEFT JOIN dbo.vwPerson P ON P.BaPersonID = F.BaPersonID
              LEFT JOIN dbo.vwUser U ON U.UserID = F.UserID
              WHERE F.FaFallID NOT IN (SELECT M.FaFallID FROM dbo.FaLeistung M with(readuncommitted)
                  WHERE M.FaLeistungID = " + FaLeistungID.ToString() + @")
                AND F.FaFallID IN (SELECT L.FaFallID FROM dbo.FaLeistung L with(readuncommitted)
                  WHERE L.ModulID = 3 and L.FaProzessCode = 300)
                AND (P.NameVorname LIKE '%' + {0} + '%' or  {0} IS NULL)
              ORDER BY P.NameVorname",
              SearchString,
              e.ButtonClicked, null, null, null);

            if (!e.Cancel)
            {
                qryFaLeistung["VUFaFallID"] = Utils.ConvertToInt(dlg[0]);
                qryFaLeistung["VUFallName"] = Utils.ConvertToString(dlg[8]);

                //edtFallVU.LookupID = Utils.ConvertToString(dlg[0]);
                //edtFallVU.EditValue = Utils.ConvertToString(dlg[8]);
                edtFallVU.ToolTip = Utils.ConvertToString(dlg[8]);
            }
        }

        private void edtSchuldnerPerson_CloseUp(object sender, DevExpress.XtraEditors.Controls.CloseUpEventArgs e)
        {
            e.AcceptValue = true;
            if (!e.CloseMode.Equals(DevExpress.XtraEditors.PopupCloseMode.Normal)) return;
            // Adresse neu holen:
            qryFaLeistung["SchuldnerBaPersonID"] = e.Value;
            qryFaLeistung_PositionChanged(sender, null);
        }

        private void qryFaLeistung_AfterDelete(object sender, System.EventArgs e)
        {
            FormController.SendMessage("FrmFall", "Action", "RefreshTree");
        }

        private void qryFaLeistung_AfterFill(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 14.09.2007 : sozheo : Neu gemacht
            // ------------------------------------------------------------------------------------------------

            if (qryFaLeistung.Count == 0) qryFaLeistung_PositionChanged(sender, e);

            btnGenerateVGNr.Visible = DBUtil.IsEmpty(qryFaLeistung["PscdVertragsgegenstandID"]);
        }

        private void qryFaLeistung_AfterPost(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 03.04.2008 : sozheo : Neu
            // ------------------------------------------------------------------------------------------------

            qryFaLeistung_PositionChanged(sender, e);

            FormController.SendMessage("FrmFall", "Action", "RefreshTree");
        }

        private void qryFaLeistung_BeforeDeleteQuestion(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 19.04.2008 : sozheo : Neu gemacht
            // 01.06.2008 : sozheo : Kontrolle PscdVertragsgegenstandID
            // 08.07.2008 : sozheo : Kontrolle PscdVertragsgegenstandID verbessert
            // ------------------------------------------------------------------------------------------------

            bool IstGesendet = false;
            SqlQuery qry = DBUtil.OpenSQL(@"
              select FaLeistungID from dbo.PscdSentFaLeistung with(readuncommitted) where FaLeistungID = {0}",
              qryFaLeistung["FaLeistungID"]
            );
            IstGesendet = (Utils.ConvertToInt(qry["FaLeistungID"]) > 0);

            if (IstGesendet)
            {
                KissMsg.ShowInfo(
                  "Dieses Inkasso hat bereits eine ans PSCD gesendete Vertragsgegenstandsnummer\r\n" +
                  "und kann deshalb nicht mehr gelöscht werden."
                );
                throw new KissCancelException();
            }

            qryDatenKontrolle.Fill(Utils.ConvertToInt(qryFaLeistung["FaLeistungID"]));
            if (qryDatenKontrolle.Count > 0)
            {
                int PCode = Utils.ConvertToInt(qryFaLeistung["FaProzessCode"]);
                if (PCode == 405)
                    KissMsg.ShowInfo(
                      "Dieses Inkasso hat bereits erfasste Daten.\r\n" +
                      "Löschen Sie zuerst alle Forderungen, alle Gläubiger und alle Rechtstitel."
                    );
                else
                    if (PCode > 407)
                        KissMsg.ShowInfo(
                          "Diese Rückforderung hat bereits erfasste Daten.\r\n" +
                          "Löschen Sie zuerst alle Forderungen."
                        );
                    else
                        KissMsg.ShowInfo(
                          "Diese Rückferstattung hat bereits erfasste Daten.\r\n" +
                          "Löschen Sie zuerst alle Forderungen."
                        );
                throw new KissCancelException();
            }
        }

        private void qryFaLeistung_BeforePost(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 14.09.2007 : sozheo : Neu gemacht
            // ------------------------------------------------------------------------------------------------

            DBUtil.CheckNotNullField(edtDatumVon, lblDatumVon.Text);

            // Kontrollieren, dass Datum von kleiner als Datum bis ist:
            if (!DBUtil.IsEmpty(qryFaLeistung["DatumVon"]) && !DBUtil.IsEmpty(qryFaLeistung["DatumBis"]))
            {
                if ((DateTime)qryFaLeistung["DatumVon"] >= (DateTime)qryFaLeistung["DatumBis"])
                {
                    KissMsg.ShowInfo("CtlIkLeistungAlbv", "DatumsFehler",
                      "Das Von-Datum muss kleiner sein als das Bis-Datum.");
                    throw new KissCancelException();
                }
            }

            if (!DBUtil.IsEmpty(qryFaLeistung["DatumBis"]) && DBUtil.IsEmpty(qryFaLeistung["AbschlussGrundCode"]))
            {
                DBUtil.CheckNotNullField(edtAbschlussGrundCode, lblAbschlussGrundCode.Text);
            }

            if (DBUtil.IsEmpty(qryFaLeistung["DatumBis"]))
            {
                // EndDatum ist leer, d.h. die Leistung ist aktiv. Wir müssen prüfen, ob es auch ein offener Fall gibt, sonst darf das Bis-Datum nicht leer sein
                if (FaProzessCode == 301 || FaProzessCode == 302 || FaProzessCode == 304)
                {
                    // W-Leistung => Es muss eine aktive F-Leistung vorhanden sein
                    object obj = DBUtil.ExecuteScalarSQL("SELECT FaFallID FROM FaLeistung WHERE FaFallID = {0} AND FaProzessCode = 200 AND DatumBis IS NULL", qryFaLeistung["FaFallID"]);

                    if (obj == null)
                    {
                        throw new KissInfoException("Ohne aktive Fallführung kann diese Leistung nicht wieder eröffnet werden. Das Bis-Datum darf nicht leer sein.");
                    }
                }
                else
                {
                    // A-Leistung => Es muss eine aktive FA-Leistung vorhanden sein
                    object obj = DBUtil.ExecuteScalarSQL("SELECT FaFallID FROM FaLeistung WHERE FaFallID = {0} AND FaProzessCode = 201 AND DatumBis IS NULL", qryFaLeistung["FaFallID"]);

                    if (obj == null)
                    {
                        throw new KissInfoException("Ohne aktive Fallführung Alimentenstelle kann diese Leistung nicht wieder eröffnet werden. Das Bis-Datum darf nicht leer sein.");
                    }
                }
            }
            else
            {
                string Msg = "";

                //Kontrolle: existieren offene Pendenzen?
                int countPendenzen = Utils.GetAnzahlOffenePendenzen((int)qryFaLeistung[DBO.FaLeistung.FaLeistungID]);
                if (countPendenzen > 0)
                {
                    Msg = string.Format(
                        "Es existieren {0} offene Pendenzen zu der abzuschliessenden Leistung.", countPendenzen);
                    KissMsg.ShowInfo(Msg);
                }
            }

            if (edtFallVU.Visible && FaProzessCode == 301)
            {
                DBUtil.CheckNotNullField(edtFallVU, lblFallVU.Text);
            }

            /*
            // Kontrollieren, dass es keine Überschneidungen im Datum gibt.
            int AktID = 0;
            if (!DBUtil.IsEmpty(qryFaLeistung["FaLeistungID"])) AktID = (int)qryFaLeistung["FaLeistungID"];

            string TmpSQL = "";
            TmpSQL += "SELECT DatumVon, DatumBis FROM FaLeistung ";
            TmpSQL += " WHERE NOT FaFall FaLeistungID=" + AktID.ToString();

            if (DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumVon"]) && DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumBis"]))
            {
              // Wenn beide Daten des aktuellen Datensatzes leer sind,
              // dann darf kein anderer Datensatz existieren:
            }
            else if ((!DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumVon"])) && DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumBis"]))
            {
              // Wenn Datum von nicht leer ist, DatumBis aber leer ist,
              // dann darf es kein anderer Datensatz geben,
              // bei welchem ein Datum grösser als das DatumVon des aktuellen Datensatzes ist:
              TmpSQL += string.Format(
                " and (DatumBis is NULL OR DatumVon >= '{0}' OR DatumBis >= '{0}') ",
                ((DateTime)qryBaWohnsitzAdresse["DatumVon"]).ToString("yyyyMMdd") );
            }
            else if (DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumVon"]) && (!DBUtil.IsEmpty(qryBaWohnsitzAdresse["DatumBis"])))
            {
              // Wenn Datum bis nicht leer ist, DatumVon aber leer ist,
              // dann darf es kein anderer Datensatz geben,
              // bei welchem ein Datum kleiner als das DatumBis des aktuellen Datensatzes ist:
              TmpSQL += string.Format(
                " and (DatumVon is NULL OR DatumVon <= '{0}' OR DatumBis <= '{0}') ",
                ((DateTime)qryBaWohnsitzAdresse["DatumVon"]).ToString("yyyyMMdd") );
            }
            else
            {
              // Wenn DatumBis und DatumVon nicht leer ist,
              // dann darf es keine Überschneidungen geben:
              TmpSQL += string.Format(
                " and ( (DatumVon <= '{1}' AND DatumBis is NULL) "+
                   "or (DatumBis >= '{0}' AND DatumVon is NULL) "+
                   "or (DatumBis >= '{0}' AND DatumBis <= '{1}') "+
                   "or (DatumVon >= '{0}' AND DatumVon <= '{1}') ) ",
                ((DateTime)qryBaWohnsitzAdresse["DatumVon"]).ToString("yyyyMMdd"),
                ((DateTime)qryBaWohnsitzAdresse["DatumBis"]).ToString("yyyyMMdd") );
            }

            SqlQuery qryDat = DBUtil.OpenSQL(TmpSQL);
            if (qryDat.Count>0)
            {
              string TmpMsg = "";
              if (!DBUtil.IsEmpty(qryDat["Strasse"]))
                TmpMsg += (string)qryDat["Strasse"] + "\r\n";
              TmpMsg += (string)qryDat["PLZ"] + " " + (string)qryDat["Ort"] + "\r\n\r\n";
              string[] MsgList = {TmpMsg};
              edtWohnsitzVon.Focus();
              KissMsg.ShowInfo("CtlIkLeistungAlbv", "DatumsFehlerWohnsitz",
                "Es gibt mind. eine zeitliche Überschneidung, z.B. mit der Zeile:\r\n\r\n"+
                "{0}"+
                "Ändern Sie das Datum von oder Datum bis des aktuellen Datensatzes\r\n"+
                "oder ändern Sie zuerst das Von-Datum oder das Bis-Datum anderer Zeilen.",
                580, 240, MsgList);
              throw new KissCancelException();
            }
            */
        }

        private void qryFaLeistung_PositionChanged(object sender, System.EventArgs e)
        {
            // Letzte Bearbeitung
            // 14.09.2007 : sozheo : Neu gemacht
            // ------------------------------------------------------------------------------------------------

            qryAdresse.Fill(Utils.ConvertToInt(qryFaLeistung["SchuldnerBaPersonID"]));

            SetEditMode();
        }

        // Letzte Bearbeitung
        // 03.04.2008 : sozheo : Neu
        // 28.05.2008 : sozheo : btnGenerateVGNr einstellen
        // ------------------------------------------------------------------------------------------------
        private void SetEditMode()
        {
            qryFaLeistung.EnableBoundFields(CanEdit && DBUtil.IsEmpty(qryFaLeistung["DatumBis"]));

            btnGenerateVGNr.Enabled = CanEdit && DBUtil.IsEmpty(qryFaLeistung["DatumBis"]);

            btnReopen.Visible = (
          CanEdit &&
          (!DBUtil.IsEmpty(qryFaLeistung["DatumBis"])) &&
          DBUtil.UserHasRight("CtlIkLeistungAlbv_FallWiederOeffnen")
            );
        }
        #endregion
    }
}
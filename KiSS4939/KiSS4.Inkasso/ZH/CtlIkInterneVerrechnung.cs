#region Header

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.3053
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#endregion

using System;
using System.Data;
using System.Drawing;
using Kiss.Interfaces.UI;
using KiSS4.Common;
using KiSS4.DB;
using KiSS4.Gui;

namespace KiSS4.Inkasso.ZH
{
    public class CtlIkInterneVerrechnung : KiSS4.Gui.KissUserControl
    {
        #region Fields

        #region Private Fields

        private bool DatenGlaeubigerWurdenKorrigiert = false;
        private int FaFallID = 0;
        private int FaLeistungID = 0;
        private int FaProzessCode = 0;
        private bool HatALVundKIZU = false;
        private bool LeistungIstGeschlossen = true;
        private string PCodeText = "";
        private string PCodeTextZusatz = "";
        private DevExpress.XtraGrid.Columns.GridColumn colBetrag;
        private DevExpress.XtraGrid.Columns.GridColumn colBetragZusatz;
        private DevExpress.XtraGrid.Columns.GridColumn colDatumVon;
        private DevExpress.XtraGrid.Columns.GridColumn colIntVerrechnung_ALBV;
        private DevExpress.XtraGrid.Columns.GridColumn colIntVerrechnung_ALV;
        private DevExpress.XtraGrid.Columns.GridColumn colIntVerrechnung_KiZu;
        private DevExpress.XtraGrid.Columns.GridColumn colPersonName;
        private System.ComponentModel.IContainer components;
        private KiSS4.Gui.KissLookUpEdit edtBaZahlungswegID_ALBV;
        private KiSS4.Gui.KissLookUpEdit edtBaZahlungswegID_ALBVZusatz;
        private KiSS4.Gui.KissLookUpEdit edtBaZahlungswegID_ALV;
        private KiSS4.Gui.KissLookUpEdit edtBaZahlungswegID_KiZu;
        private KiSS4.Gui.KissCalcEdit edtBetrag;
        private KiSS4.Gui.KissCalcEdit edtBetragZusatz;
        private KiSS4.Gui.KissDateEdit edtDatum;
        private KiSS4.Gui.KissCheckEdit edtHatALBV;
        private KiSS4.Gui.KissCheckEdit edtHatKiZu;
        private KiSS4.Gui.KissCheckEdit edtIntVerr_ALBV;
        private KiSS4.Gui.KissCheckEdit edtIntVerr_ALV;
        private KiSS4.Gui.KissCheckEdit edtIntVerr_KiZu;
        private KiSS4.Gui.KissLookUpEdit edtPerson;
        private KiSS4.Gui.KissGroupBox gbxALBV;
        private KiSS4.Gui.KissGroupBox gbxALV;
        private KiSS4.Gui.KissGroupBox gbxKiZu;
        private KiSS4.Gui.KissGrid grdInterneVerrechnung;
        private DevExpress.XtraGrid.Views.Grid.GridView gvwInterneVerrechnung;
        private KiSS4.Gui.KissLabel lblBetrag;
        private KiSS4.Gui.KissLabel lblBetragZusatz;
        private KiSS4.Gui.KissLabel lblDatum;
        private KiSS4.Gui.KissLabel lblIntVerr_ALBV;
        private KiSS4.Gui.KissLabel lblIntVerr_ALBV_Zusatz;
        private KiSS4.Gui.KissLabel lblPerson;
        private KiSS4.Gui.KissMemoEdit memALBVKonto;
        private KiSS4.Gui.KissMemoEdit memALBVName;
        private KiSS4.Gui.KissMemoEdit memALBVZusatzKonto;
        private KiSS4.Gui.KissMemoEdit memALBVZusatzName;
        private KiSS4.Gui.KissMemoEdit memALVKonto;
        private KiSS4.Gui.KissMemoEdit memALVName;
        private KiSS4.Gui.KissMemoEdit memKiZuKonto;
        private KiSS4.Gui.KissMemoEdit memKiZuName;
        private KiSS4.DB.SqlQuery qryInterneVerrechnung;
        private KiSS4.DB.SqlQuery qryPerson;
        private KiSS4.DB.SqlQuery qryZahlungsweg;

        #endregion

        #endregion

        #region Constructors

        #region Public Constructors

        public CtlIkInterneVerrechnung()
        {
            this.InitializeComponent();
        }

        #endregion

        #endregion

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(CtlIkInterneVerrechnung));
            this.grdInterneVerrechnung = new KiSS4.Gui.KissGrid();
            this.edtPerson = new KiSS4.Gui.KissLookUpEdit();
            this.edtDatum = new KiSS4.Gui.KissDateEdit();
            this.gbxALBV = new KiSS4.Gui.KissGroupBox();
            this.edtHatALBV = new KiSS4.Gui.KissCheckEdit();
            this.edtIntVerr_ALBV = new KiSS4.Gui.KissCheckEdit();
            this.edtBaZahlungswegID_ALBV = new KiSS4.Gui.KissLookUpEdit();
            this.edtBaZahlungswegID_ALBVZusatz = new KiSS4.Gui.KissLookUpEdit();
            this.edtBetrag = new KiSS4.Gui.KissCalcEdit();
            this.edtBetragZusatz = new KiSS4.Gui.KissCalcEdit();
            this.lblBetrag = new KiSS4.Gui.KissLabel();
            this.lblBetragZusatz = new KiSS4.Gui.KissLabel();
            this.lblIntVerr_ALBV = new KiSS4.Gui.KissLabel();
            this.lblIntVerr_ALBV_Zusatz = new KiSS4.Gui.KissLabel();
            this.memALBVName = new KiSS4.Gui.KissMemoEdit();
            this.memALBVKonto = new KiSS4.Gui.KissMemoEdit();
            this.memALBVZusatzName = new KiSS4.Gui.KissMemoEdit();
            this.memALBVZusatzKonto = new KiSS4.Gui.KissMemoEdit();
            this.gbxALV = new KiSS4.Gui.KissGroupBox();
            this.edtIntVerr_ALV = new KiSS4.Gui.KissCheckEdit();
            this.edtBaZahlungswegID_ALV = new KiSS4.Gui.KissLookUpEdit();
            this.memALVName = new KiSS4.Gui.KissMemoEdit();
            this.memALVKonto = new KiSS4.Gui.KissMemoEdit();
            this.gbxKiZu = new KiSS4.Gui.KissGroupBox();
            this.edtHatKiZu = new KiSS4.Gui.KissCheckEdit();
            this.edtIntVerr_KiZu = new KiSS4.Gui.KissCheckEdit();
            this.edtBaZahlungswegID_KiZu = new KiSS4.Gui.KissLookUpEdit();
            this.memKiZuName = new KiSS4.Gui.KissMemoEdit();
            this.memKiZuKonto = new KiSS4.Gui.KissMemoEdit();
            this.lblPerson = new KiSS4.Gui.KissLabel();
            this.lblDatum = new KiSS4.Gui.KissLabel();
            this.colBetrag = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colBetragZusatz = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colDatumVon = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colIntVerrechnung_ALBV = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colIntVerrechnung_ALV = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colIntVerrechnung_KiZu = new DevExpress.XtraGrid.Columns.GridColumn();
            this.colPersonName = new DevExpress.XtraGrid.Columns.GridColumn();
            this.gvwInterneVerrechnung = new DevExpress.XtraGrid.Views.Grid.GridView();
            this.qryInterneVerrechnung = new KiSS4.DB.SqlQuery(this.components);
            this.qryPerson = new KiSS4.DB.SqlQuery(this.components);
            this.qryZahlungsweg = new KiSS4.DB.SqlQuery(this.components);
            ((System.ComponentModel.ISupportInitialize)(this.grdInterneVerrechnung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPerson.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtDatum.Properties)).BeginInit();
            this.gbxALBV.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.edtHatALBV.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_ALBV.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBV)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBV.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBVZusatz)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBVZusatz.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBetrag.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBetragZusatz.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBetrag)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBetragZusatz)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblIntVerr_ALBV)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblIntVerr_ALBV_Zusatz)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVKonto.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVZusatzName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVZusatzKonto.Properties)).BeginInit();
            this.gbxALV.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_ALV.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALV)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALV.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALVName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALVKonto.Properties)).BeginInit();
            this.gbxKiZu.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.edtHatKiZu.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_KiZu.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_KiZu)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_KiZu.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memKiZuName.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.memKiZuKonto.Properties)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatum)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.gvwInterneVerrechnung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryInterneVerrechnung)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryPerson)).BeginInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryZahlungsweg)).BeginInit();
            this.SuspendLayout();
            //
            // grdInterneVerrechnung
            //
            this.grdInterneVerrechnung.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom)
                        | System.Windows.Forms.AnchorStyles.Left)
                        | System.Windows.Forms.AnchorStyles.Right)));
            this.grdInterneVerrechnung.DataSource = this.qryInterneVerrechnung;
            this.grdInterneVerrechnung.EmbeddedNavigator.Name = "";
            this.grdInterneVerrechnung.Location = new System.Drawing.Point(6, 3);
            this.grdInterneVerrechnung.MainView = this.gvwInterneVerrechnung;
            this.grdInterneVerrechnung.Name = "grdInterneVerrechnung";
            this.grdInterneVerrechnung.Size = new System.Drawing.Size(725, 124);
            this.grdInterneVerrechnung.TabIndex = 0;
            this.grdInterneVerrechnung.ViewCollection.AddRange(new DevExpress.XtraGrid.Views.Base.BaseView[] {
                        this.gvwInterneVerrechnung});
            //
            // edtPerson
            //
            this.edtPerson.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.edtPerson.DataMember = "BaPersonID";
            this.edtPerson.DataSource = this.qryInterneVerrechnung;
            this.edtPerson.Location = new System.Drawing.Point(6, 171);
            this.edtPerson.Name = "edtPerson";
            this.edtPerson.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtPerson.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtPerson.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtPerson.Properties.Appearance.Options.UseBackColor = true;
            this.edtPerson.Properties.Appearance.Options.UseBorderColor = true;
            this.edtPerson.Properties.Appearance.Options.UseFont = true;
            this.edtPerson.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtPerson.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtPerson.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtPerson.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Code", "BaPersonID", 20, DevExpress.Utils.FormatType.None, "", false, DevExpress.Utils.HorzAlignment.Default, DevExpress.Data.ColumnSortOrder.None),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Text", "Person", 80)});
            this.edtPerson.Properties.DataSource = this.qryPerson;
            this.edtPerson.Properties.DisplayMember = "Text";
            this.edtPerson.Properties.NullText = "";
            this.edtPerson.Properties.ShowFooter = false;
            this.edtPerson.Properties.ShowHeader = false;
            this.edtPerson.Properties.ValueMember = "Code";
            this.edtPerson.Size = new System.Drawing.Size(353, 24);
            this.edtPerson.TabIndex = 1;
            //
            // edtDatum
            //
            this.edtDatum.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.edtDatum.DataMember = "DatumVon";
            this.edtDatum.DataSource = this.qryInterneVerrechnung;
            this.edtDatum.EditValue = null;
            this.edtDatum.Location = new System.Drawing.Point(371, 171);
            this.edtDatum.Name = "edtDatum";
            this.edtDatum.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.False;
            this.edtDatum.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtDatum.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtDatum.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtDatum.Properties.Appearance.Options.UseBackColor = true;
            this.edtDatum.Properties.Appearance.Options.UseBorderColor = true;
            this.edtDatum.Properties.Appearance.Options.UseFont = true;
            this.edtDatum.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtDatum.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtDatum.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtDatum.Properties.Mask.EditMask = "dd.MM.yyyy";
            this.edtDatum.Properties.ShowToday = false;
            this.edtDatum.Size = new System.Drawing.Size(121, 24);
            this.edtDatum.TabIndex = 2;
            //
            // gbxALBV
            //
            this.gbxALBV.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.gbxALBV.Controls.Add(this.memALBVZusatzKonto);
            this.gbxALBV.Controls.Add(this.memALBVZusatzName);
            this.gbxALBV.Controls.Add(this.memALBVKonto);
            this.gbxALBV.Controls.Add(this.memALBVName);
            this.gbxALBV.Controls.Add(this.lblIntVerr_ALBV_Zusatz);
            this.gbxALBV.Controls.Add(this.lblIntVerr_ALBV);
            this.gbxALBV.Controls.Add(this.lblBetragZusatz);
            this.gbxALBV.Controls.Add(this.lblBetrag);
            this.gbxALBV.Controls.Add(this.edtBetragZusatz);
            this.gbxALBV.Controls.Add(this.edtBetrag);
            this.gbxALBV.Controls.Add(this.edtBaZahlungswegID_ALBVZusatz);
            this.gbxALBV.Controls.Add(this.edtBaZahlungswegID_ALBV);
            this.gbxALBV.Controls.Add(this.edtIntVerr_ALBV);
            this.gbxALBV.Controls.Add(this.edtHatALBV);
            this.gbxALBV.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.gbxALBV.Location = new System.Drawing.Point(6, 224);
            this.gbxALBV.Name = "gbxALBV";
            this.gbxALBV.Size = new System.Drawing.Size(708, 180);
            this.gbxALBV.TabIndex = 3;
            this.gbxALBV.TabStop = false;
            this.gbxALBV.Text = "ALBV";
            this.gbxALBV.UseCompatibleTextRendering = true;
            //
            // edtHatALBV
            //
            this.edtHatALBV.DataMember = "HatALBV";
            this.edtHatALBV.DataSource = this.qryInterneVerrechnung;
            this.edtHatALBV.Location = new System.Drawing.Point(8, 0);
            this.edtHatALBV.Name = "edtHatALBV";
            this.edtHatALBV.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtHatALBV.Properties.Appearance.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtHatALBV.Properties.Appearance.Options.UseBackColor = true;
            this.edtHatALBV.Properties.Appearance.Options.UseFont = true;
            this.edtHatALBV.Properties.Caption = "ALBV";
            this.edtHatALBV.Size = new System.Drawing.Size(58, 20);
            this.edtHatALBV.TabIndex = 3;
            this.edtHatALBV.CheckedChanged += new System.EventHandler(this.edtHatALBV_CheckedChanged);
            //
            // edtIntVerr_ALBV
            //
            this.edtIntVerr_ALBV.DataMember = "IntVerrechnung_ALBV";
            this.edtIntVerr_ALBV.DataSource = this.qryInterneVerrechnung;
            this.edtIntVerr_ALBV.Location = new System.Drawing.Point(8, 20);
            this.edtIntVerr_ALBV.Name = "edtIntVerr_ALBV";
            this.edtIntVerr_ALBV.Properties.Appearance.BackColor = System.Drawing.Color.Transparent;
            this.edtIntVerr_ALBV.Properties.Appearance.Options.UseBackColor = true;
            this.edtIntVerr_ALBV.Properties.Caption = "Interne Verechnung ALBV";
            this.edtIntVerr_ALBV.Properties.NullStyle = DevExpress.XtraEditors.Controls.StyleIndeterminate.Inactive;
            this.edtIntVerr_ALBV.Size = new System.Drawing.Size(164, 19);
            this.edtIntVerr_ALBV.TabIndex = 4;
            this.edtIntVerr_ALBV.CheckedChanged += new System.EventHandler(this.edtIntVerr_ALBV_CheckedChanged);
            //
            // edtBaZahlungswegID_ALBV
            //
            this.edtBaZahlungswegID_ALBV.DataMember = "BaZahlungswegID_ALBV";
            this.edtBaZahlungswegID_ALBV.DataSource = this.qryInterneVerrechnung;
            this.edtBaZahlungswegID_ALBV.Location = new System.Drawing.Point(8, 70);
            this.edtBaZahlungswegID_ALBV.Name = "edtBaZahlungswegID_ALBV";
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.Options.UseBackColor = true;
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBaZahlungswegID_ALBV.Properties.Appearance.Options.UseFont = true;
            this.edtBaZahlungswegID_ALBV.Properties.AppearanceDropDown.Font = new System.Drawing.Font("Arial", 8.25F);
            this.edtBaZahlungswegID_ALBV.Properties.AppearanceDropDown.Options.UseFont = true;
            this.edtBaZahlungswegID_ALBV.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBaZahlungswegID_ALBV.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBaZahlungswegID_ALBV.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBaZahlungswegID_ALBV.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("NameVorname", "Name", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumVon", "Gültig ab", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumBis", "Gültig bis", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Bank", "Bank", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Konto", "Konto", 120)});
            this.edtBaZahlungswegID_ALBV.Properties.DataSource = this.qryZahlungsweg;
            this.edtBaZahlungswegID_ALBV.Properties.DisplayMember = "Text";
            this.edtBaZahlungswegID_ALBV.Properties.NullText = "";
            this.edtBaZahlungswegID_ALBV.Properties.PopupFormWidth = 460;
            this.edtBaZahlungswegID_ALBV.Properties.ShowFooter = false;
            this.edtBaZahlungswegID_ALBV.Properties.ShowHeader = false;
            this.edtBaZahlungswegID_ALBV.Properties.ValueMember = "Code";
            this.edtBaZahlungswegID_ALBV.Size = new System.Drawing.Size(353, 24);
            this.edtBaZahlungswegID_ALBV.TabIndex = 5;
            this.edtBaZahlungswegID_ALBV.EditValueChanged += new System.EventHandler(this.edtBaZahlungswegID_ALBV_EditValueChanged);
            //
            // edtBaZahlungswegID_ALBVZusatz
            //
            this.edtBaZahlungswegID_ALBVZusatz.DataMember = "BaZahlungswegID_ALBVZusatz";
            this.edtBaZahlungswegID_ALBVZusatz.DataSource = this.qryInterneVerrechnung;
            this.edtBaZahlungswegID_ALBVZusatz.Location = new System.Drawing.Point(365, 70);
            this.edtBaZahlungswegID_ALBVZusatz.Name = "edtBaZahlungswegID_ALBVZusatz";
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.Options.UseBackColor = true;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Appearance.Options.UseFont = true;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBaZahlungswegID_ALBVZusatz.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("NameVorname", "Name", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumVon", "Gültig ab", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumBis", "Gültig bis", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Bank", "Bank", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Konto", "Konto", 120)});
            this.edtBaZahlungswegID_ALBVZusatz.Properties.DataSource = this.qryZahlungsweg;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.DisplayMember = "Text";
            this.edtBaZahlungswegID_ALBVZusatz.Properties.NullText = "";
            this.edtBaZahlungswegID_ALBVZusatz.Properties.ShowFooter = false;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.ShowHeader = false;
            this.edtBaZahlungswegID_ALBVZusatz.Properties.ValueMember = "Code";
            this.edtBaZahlungswegID_ALBVZusatz.Size = new System.Drawing.Size(353, 24);
            this.edtBaZahlungswegID_ALBVZusatz.TabIndex = 6;
            this.edtBaZahlungswegID_ALBVZusatz.CloseUp += new DevExpress.XtraEditors.Controls.CloseUpEventHandler(this.edtBaZahlungswegID_ALBVZusatz_CloseUp);
            this.edtBaZahlungswegID_ALBVZusatz.EditValueChanged += new System.EventHandler(this.edtBaZahlungswegID_ALBVZusatz_EditValueChanged);
            //
            // edtBetrag
            //
            this.edtBetrag.DataMember = "Betrag";
            this.edtBetrag.DataSource = this.qryInterneVerrechnung;
            this.edtBetrag.Location = new System.Drawing.Point(261, 40);
            this.edtBetrag.Name = "edtBetrag";
            this.edtBetrag.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtBetrag.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBetrag.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBetrag.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBetrag.Properties.Appearance.Options.UseBackColor = true;
            this.edtBetrag.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBetrag.Properties.Appearance.Options.UseFont = true;
            this.edtBetrag.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBetrag.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBetrag.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBetrag.Properties.DisplayFormat.FormatString = "N2";
            this.edtBetrag.Properties.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.edtBetrag.Properties.EditFormat.FormatString = "N2";
            this.edtBetrag.Properties.EditFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.edtBetrag.Size = new System.Drawing.Size(100, 24);
            this.edtBetrag.TabIndex = 7;
            this.edtBetrag.EditValueChanged += new System.EventHandler(this.edtBetrag_EditValueChanged);
            //
            // edtBetragZusatz
            //
            this.edtBetragZusatz.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.edtBetragZusatz.DataMember = "BetragZusatz";
            this.edtBetragZusatz.DataSource = this.qryInterneVerrechnung;
            this.edtBetragZusatz.Location = new System.Drawing.Point(603, 40);
            this.edtBetragZusatz.Name = "edtBetragZusatz";
            this.edtBetragZusatz.Properties.AllowNullInput = DevExpress.Utils.DefaultBoolean.True;
            this.edtBetragZusatz.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBetragZusatz.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBetragZusatz.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBetragZusatz.Properties.Appearance.Options.UseBackColor = true;
            this.edtBetragZusatz.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBetragZusatz.Properties.Appearance.Options.UseFont = true;
            this.edtBetragZusatz.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBetragZusatz.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBetragZusatz.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBetragZusatz.Properties.DisplayFormat.FormatString = "N2";
            this.edtBetragZusatz.Properties.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.edtBetragZusatz.Properties.EditFormat.FormatString = "N2";
            this.edtBetragZusatz.Properties.EditFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.edtBetragZusatz.Size = new System.Drawing.Size(100, 24);
            this.edtBetragZusatz.TabIndex = 8;
            this.edtBetragZusatz.EditValueChanged += new System.EventHandler(this.edtBetragZusatz_EditValueChanged);
            //
            // lblBetrag
            //
            this.lblBetrag.Location = new System.Drawing.Point(210, 40);
            this.lblBetrag.Name = "lblBetrag";
            this.lblBetrag.Size = new System.Drawing.Size(45, 24);
            this.lblBetrag.TabIndex = 11;
            this.lblBetrag.Text = "Betrag";
            this.lblBetrag.UseCompatibleTextRendering = true;
            //
            // lblBetragZusatz
            //
            this.lblBetragZusatz.Location = new System.Drawing.Point(535, 40);
            this.lblBetragZusatz.Name = "lblBetragZusatz";
            this.lblBetragZusatz.Size = new System.Drawing.Size(62, 24);
            this.lblBetragZusatz.TabIndex = 12;
            this.lblBetragZusatz.Text = "Teilbetrag";
            this.lblBetragZusatz.UseCompatibleTextRendering = true;
            //
            // lblIntVerr_ALBV
            //
            this.lblIntVerr_ALBV.Location = new System.Drawing.Point(8, 40);
            this.lblIntVerr_ALBV.Name = "lblIntVerr_ALBV";
            this.lblIntVerr_ALBV.Size = new System.Drawing.Size(110, 24);
            this.lblIntVerr_ALBV.TabIndex = 15;
            this.lblIntVerr_ALBV.Text = "Zahlungsweg ALBV";
            this.lblIntVerr_ALBV.UseCompatibleTextRendering = true;
            //
            // lblIntVerr_ALBV_Zusatz
            //
            this.lblIntVerr_ALBV_Zusatz.Location = new System.Drawing.Point(365, 40);
            this.lblIntVerr_ALBV_Zusatz.Name = "lblIntVerr_ALBV_Zusatz";
            this.lblIntVerr_ALBV_Zusatz.Size = new System.Drawing.Size(138, 24);
            this.lblIntVerr_ALBV_Zusatz.TabIndex = 16;
            this.lblIntVerr_ALBV_Zusatz.Text = "Teilzahlungsweg ALBV";
            this.lblIntVerr_ALBV_Zusatz.UseCompatibleTextRendering = true;
            //
            // memALBVName
            //
            this.memALBVName.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALBVName.EditValue = "";
            this.memALBVName.Location = new System.Drawing.Point(8, 100);
            this.memALBVName.Name = "memALBVName";
            this.memALBVName.Properties.AllowFocused = false;
            this.memALBVName.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALBVName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALBVName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALBVName.Properties.Appearance.Options.UseBackColor = true;
            this.memALBVName.Properties.Appearance.Options.UseBorderColor = true;
            this.memALBVName.Properties.Appearance.Options.UseFont = true;
            this.memALBVName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALBVName.Properties.LookAndFeel.UseDefaultLookAndFeel = false;
            this.memALBVName.Properties.ReadOnly = true;
            this.memALBVName.Size = new System.Drawing.Size(138, 72);
            this.memALBVName.TabIndex = 17;
            this.memALBVName.TabStop = false;
            //
            // memALBVKonto
            //
            this.memALBVKonto.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALBVKonto.EditValue = "";
            this.memALBVKonto.Location = new System.Drawing.Point(152, 100);
            this.memALBVKonto.Name = "memALBVKonto";
            this.memALBVKonto.Properties.AllowFocused = false;
            this.memALBVKonto.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALBVKonto.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALBVKonto.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALBVKonto.Properties.Appearance.Options.UseBackColor = true;
            this.memALBVKonto.Properties.Appearance.Options.UseBorderColor = true;
            this.memALBVKonto.Properties.Appearance.Options.UseFont = true;
            this.memALBVKonto.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALBVKonto.Properties.ReadOnly = true;
            this.memALBVKonto.Size = new System.Drawing.Size(138, 72);
            this.memALBVKonto.TabIndex = 18;
            this.memALBVKonto.TabStop = false;
            //
            // memALBVZusatzName
            //
            this.memALBVZusatzName.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALBVZusatzName.EditValue = "";
            this.memALBVZusatzName.Location = new System.Drawing.Point(365, 100);
            this.memALBVZusatzName.Name = "memALBVZusatzName";
            this.memALBVZusatzName.Properties.AllowFocused = false;
            this.memALBVZusatzName.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALBVZusatzName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALBVZusatzName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALBVZusatzName.Properties.Appearance.Options.UseBackColor = true;
            this.memALBVZusatzName.Properties.Appearance.Options.UseBorderColor = true;
            this.memALBVZusatzName.Properties.Appearance.Options.UseFont = true;
            this.memALBVZusatzName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALBVZusatzName.Properties.ReadOnly = true;
            this.memALBVZusatzName.Size = new System.Drawing.Size(138, 72);
            this.memALBVZusatzName.TabIndex = 19;
            this.memALBVZusatzName.TabStop = false;
            //
            // memALBVZusatzKonto
            //
            this.memALBVZusatzKonto.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALBVZusatzKonto.EditValue = "";
            this.memALBVZusatzKonto.Location = new System.Drawing.Point(509, 100);
            this.memALBVZusatzKonto.Name = "memALBVZusatzKonto";
            this.memALBVZusatzKonto.Properties.AllowFocused = false;
            this.memALBVZusatzKonto.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALBVZusatzKonto.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALBVZusatzKonto.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALBVZusatzKonto.Properties.Appearance.Options.UseBackColor = true;
            this.memALBVZusatzKonto.Properties.Appearance.Options.UseBorderColor = true;
            this.memALBVZusatzKonto.Properties.Appearance.Options.UseFont = true;
            this.memALBVZusatzKonto.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALBVZusatzKonto.Properties.ReadOnly = true;
            this.memALBVZusatzKonto.Size = new System.Drawing.Size(138, 72);
            this.memALBVZusatzKonto.TabIndex = 20;
            this.memALBVZusatzKonto.TabStop = false;
            //
            // gbxALV
            //
            this.gbxALV.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.gbxALV.Controls.Add(this.memALVKonto);
            this.gbxALV.Controls.Add(this.memALVName);
            this.gbxALV.Controls.Add(this.edtBaZahlungswegID_ALV);
            this.gbxALV.Controls.Add(this.edtIntVerr_ALV);
            this.gbxALV.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.gbxALV.Location = new System.Drawing.Point(6, 428);
            this.gbxALV.Name = "gbxALV";
            this.gbxALV.Size = new System.Drawing.Size(353, 160);
            this.gbxALV.TabIndex = 4;
            this.gbxALV.TabStop = false;
            this.gbxALV.Text = "ALV";
            this.gbxALV.UseCompatibleTextRendering = true;
            //
            // edtIntVerr_ALV
            //
            this.edtIntVerr_ALV.DataMember = "IntVerrechnung_ALV";
            this.edtIntVerr_ALV.DataSource = this.qryInterneVerrechnung;
            this.edtIntVerr_ALV.Location = new System.Drawing.Point(8, 20);
            this.edtIntVerr_ALV.Name = "edtIntVerr_ALV";
            this.edtIntVerr_ALV.Properties.Appearance.BackColor = System.Drawing.Color.Transparent;
            this.edtIntVerr_ALV.Properties.Appearance.Options.UseBackColor = true;
            this.edtIntVerr_ALV.Properties.Caption = "Interne Verrechnung ALV";
            this.edtIntVerr_ALV.Size = new System.Drawing.Size(164, 19);
            this.edtIntVerr_ALV.TabIndex = 9;
            this.edtIntVerr_ALV.CheckedChanged += new System.EventHandler(this.edtIntVerr_ALV_CheckedChanged);
            //
            // edtBaZahlungswegID_ALV
            //
            this.edtBaZahlungswegID_ALV.DataMember = "BaZahlungswegID_ALV";
            this.edtBaZahlungswegID_ALV.DataSource = this.qryInterneVerrechnung;
            this.edtBaZahlungswegID_ALV.Location = new System.Drawing.Point(10, 50);
            this.edtBaZahlungswegID_ALV.Name = "edtBaZahlungswegID_ALV";
            this.edtBaZahlungswegID_ALV.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBaZahlungswegID_ALV.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBaZahlungswegID_ALV.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBaZahlungswegID_ALV.Properties.Appearance.Options.UseBackColor = true;
            this.edtBaZahlungswegID_ALV.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBaZahlungswegID_ALV.Properties.Appearance.Options.UseFont = true;
            this.edtBaZahlungswegID_ALV.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBaZahlungswegID_ALV.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBaZahlungswegID_ALV.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBaZahlungswegID_ALV.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("NameVorname", "Name", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumVon", "Gültig ab", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumBis", "Gültig bis", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Bank", "Bank", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Konto", "Konto", 120)});
            this.edtBaZahlungswegID_ALV.Properties.DataSource = this.qryZahlungsweg;
            this.edtBaZahlungswegID_ALV.Properties.DisplayMember = "Text";
            this.edtBaZahlungswegID_ALV.Properties.NullText = "";
            this.edtBaZahlungswegID_ALV.Properties.ShowFooter = false;
            this.edtBaZahlungswegID_ALV.Properties.ShowHeader = false;
            this.edtBaZahlungswegID_ALV.Properties.ValueMember = "Code";
            this.edtBaZahlungswegID_ALV.Size = new System.Drawing.Size(318, 24);
            this.edtBaZahlungswegID_ALV.TabIndex = 10;
            this.edtBaZahlungswegID_ALV.EditValueChanged += new System.EventHandler(this.edtBaZahlungswegID_ALV_EditValueChanged);
            //
            // memALVName
            //
            this.memALVName.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALVName.EditValue = "";
            this.memALVName.Location = new System.Drawing.Point(10, 80);
            this.memALVName.Name = "memALVName";
            this.memALVName.Properties.AllowFocused = false;
            this.memALVName.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALVName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALVName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALVName.Properties.Appearance.Options.UseBackColor = true;
            this.memALVName.Properties.Appearance.Options.UseBorderColor = true;
            this.memALVName.Properties.Appearance.Options.UseFont = true;
            this.memALVName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALVName.Properties.ReadOnly = true;
            this.memALVName.Size = new System.Drawing.Size(138, 72);
            this.memALVName.TabIndex = 18;
            this.memALVName.TabStop = false;
            //
            // memALVKonto
            //
            this.memALVKonto.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memALVKonto.EditValue = "";
            this.memALVKonto.Location = new System.Drawing.Point(154, 80);
            this.memALVKonto.Name = "memALVKonto";
            this.memALVKonto.Properties.AllowFocused = false;
            this.memALVKonto.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memALVKonto.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memALVKonto.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memALVKonto.Properties.Appearance.Options.UseBackColor = true;
            this.memALVKonto.Properties.Appearance.Options.UseBorderColor = true;
            this.memALVKonto.Properties.Appearance.Options.UseFont = true;
            this.memALVKonto.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memALVKonto.Properties.ReadOnly = true;
            this.memALVKonto.Size = new System.Drawing.Size(138, 72);
            this.memALVKonto.TabIndex = 19;
            this.memALVKonto.TabStop = false;
            //
            // gbxKiZu
            //
            this.gbxKiZu.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.gbxKiZu.Controls.Add(this.memKiZuKonto);
            this.gbxKiZu.Controls.Add(this.memKiZuName);
            this.gbxKiZu.Controls.Add(this.edtBaZahlungswegID_KiZu);
            this.gbxKiZu.Controls.Add(this.edtIntVerr_KiZu);
            this.gbxKiZu.Controls.Add(this.edtHatKiZu);
            this.gbxKiZu.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.gbxKiZu.Location = new System.Drawing.Point(381, 428);
            this.gbxKiZu.Name = "gbxKiZu";
            this.gbxKiZu.Size = new System.Drawing.Size(343, 160);
            this.gbxKiZu.TabIndex = 5;
            this.gbxKiZu.TabStop = false;
            this.gbxKiZu.UseCompatibleTextRendering = true;
            //
            // edtHatKiZu
            //
            this.edtHatKiZu.DataMember = "HatKiZu";
            this.edtHatKiZu.DataSource = this.qryInterneVerrechnung;
            this.edtHatKiZu.Location = new System.Drawing.Point(8, 0);
            this.edtHatKiZu.Name = "edtHatKiZu";
            this.edtHatKiZu.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.edtHatKiZu.Properties.Appearance.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtHatKiZu.Properties.Appearance.Options.UseBackColor = true;
            this.edtHatKiZu.Properties.Appearance.Options.UseFont = true;
            this.edtHatKiZu.Properties.Caption = "KiZu";
            this.edtHatKiZu.Size = new System.Drawing.Size(51, 20);
            this.edtHatKiZu.TabIndex = 11;
            this.edtHatKiZu.CheckedChanged += new System.EventHandler(this.edtHatKiZu_CheckedChanged);
            //
            // edtIntVerr_KiZu
            //
            this.edtIntVerr_KiZu.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.edtIntVerr_KiZu.DataMember = "IntVerrechnung_KiZu";
            this.edtIntVerr_KiZu.DataSource = this.qryInterneVerrechnung;
            this.edtIntVerr_KiZu.Location = new System.Drawing.Point(8, 20);
            this.edtIntVerr_KiZu.Name = "edtIntVerr_KiZu";
            this.edtIntVerr_KiZu.Properties.Appearance.BackColor = System.Drawing.Color.Transparent;
            this.edtIntVerr_KiZu.Properties.Appearance.Options.UseBackColor = true;
            this.edtIntVerr_KiZu.Properties.Caption = "Interne Verrechnung KiZu";
            this.edtIntVerr_KiZu.Size = new System.Drawing.Size(157, 19);
            this.edtIntVerr_KiZu.TabIndex = 12;
            this.edtIntVerr_KiZu.CheckedChanged += new System.EventHandler(this.edtIntVerr_KiZu_CheckedChanged);
            //
            // edtBaZahlungswegID_KiZu
            //
            this.edtBaZahlungswegID_KiZu.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.edtBaZahlungswegID_KiZu.DataMember = "BaZahlungswegID_KiZu";
            this.edtBaZahlungswegID_KiZu.DataSource = this.qryInterneVerrechnung;
            this.edtBaZahlungswegID_KiZu.Location = new System.Drawing.Point(10, 50);
            this.edtBaZahlungswegID_KiZu.Name = "edtBaZahlungswegID_KiZu";
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.BackColor = System.Drawing.Color.AliceBlue;
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.Options.UseBackColor = true;
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.Options.UseBorderColor = true;
            this.edtBaZahlungswegID_KiZu.Properties.Appearance.Options.UseFont = true;
            this.edtBaZahlungswegID_KiZu.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.edtBaZahlungswegID_KiZu.Properties.Buttons.AddRange(new DevExpress.XtraEditors.Controls.EditorButton[] {
                        new DevExpress.XtraEditors.Controls.EditorButton(DevExpress.XtraEditors.Controls.ButtonPredefines.Combo)});
            this.edtBaZahlungswegID_KiZu.Properties.ButtonsStyle = DevExpress.XtraEditors.Controls.BorderStyles.UltraFlat;
            this.edtBaZahlungswegID_KiZu.Properties.Columns.AddRange(new DevExpress.XtraEditors.Controls.LookUpColumnInfo[] {
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("NameVorname", "Name", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumVon", "Gültig bis", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("DatumBis", "Gültig bis", 50),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Bank", "Bank", 120),
                        new DevExpress.XtraEditors.Controls.LookUpColumnInfo("Konto", "Konto", 120)});
            this.edtBaZahlungswegID_KiZu.Properties.DataSource = this.qryZahlungsweg;
            this.edtBaZahlungswegID_KiZu.Properties.DisplayMember = "Text";
            this.edtBaZahlungswegID_KiZu.Properties.NullText = "";
            this.edtBaZahlungswegID_KiZu.Properties.ShowFooter = false;
            this.edtBaZahlungswegID_KiZu.Properties.ShowHeader = false;
            this.edtBaZahlungswegID_KiZu.Properties.ValueMember = "Code";
            this.edtBaZahlungswegID_KiZu.Size = new System.Drawing.Size(318, 24);
            this.edtBaZahlungswegID_KiZu.TabIndex = 13;
            this.edtBaZahlungswegID_KiZu.EditValueChanged += new System.EventHandler(this.edtBaZahlungswegID_KiZu_EditValueChanged);
            //
            // memKiZuName
            //
            this.memKiZuName.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memKiZuName.EditValue = "";
            this.memKiZuName.Location = new System.Drawing.Point(10, 80);
            this.memKiZuName.Name = "memKiZuName";
            this.memKiZuName.Properties.AllowFocused = false;
            this.memKiZuName.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memKiZuName.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memKiZuName.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memKiZuName.Properties.Appearance.Options.UseBackColor = true;
            this.memKiZuName.Properties.Appearance.Options.UseBorderColor = true;
            this.memKiZuName.Properties.Appearance.Options.UseFont = true;
            this.memKiZuName.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memKiZuName.Properties.ReadOnly = true;
            this.memKiZuName.Size = new System.Drawing.Size(138, 72);
            this.memKiZuName.TabIndex = 18;
            this.memKiZuName.TabStop = false;
            //
            // memKiZuKonto
            //
            this.memKiZuKonto.EditMode = Kiss.Interfaces.UI.EditModeType.ReadOnly;
            this.memKiZuKonto.EditValue = "";
            this.memKiZuKonto.Location = new System.Drawing.Point(171, 80);
            this.memKiZuKonto.Name = "memKiZuKonto";
            this.memKiZuKonto.Properties.AllowFocused = false;
            this.memKiZuKonto.Properties.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.memKiZuKonto.Properties.Appearance.BorderColor = System.Drawing.Color.Linen;
            this.memKiZuKonto.Properties.Appearance.Font = new System.Drawing.Font("Arial", 13F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.memKiZuKonto.Properties.Appearance.Options.UseBackColor = true;
            this.memKiZuKonto.Properties.Appearance.Options.UseBorderColor = true;
            this.memKiZuKonto.Properties.Appearance.Options.UseFont = true;
            this.memKiZuKonto.Properties.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.HotFlat;
            this.memKiZuKonto.Properties.ReadOnly = true;
            this.memKiZuKonto.Size = new System.Drawing.Size(138, 72);
            this.memKiZuKonto.TabIndex = 19;
            this.memKiZuKonto.TabStop = false;
            //
            // lblPerson
            //
            this.lblPerson.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.lblPerson.Location = new System.Drawing.Point(6, 146);
            this.lblPerson.Name = "lblPerson";
            this.lblPerson.Size = new System.Drawing.Size(154, 24);
            this.lblPerson.TabIndex = 9;
            this.lblPerson.Text = "Auswahl Gläubiger";
            this.lblPerson.UseCompatibleTextRendering = true;
            //
            // lblDatum
            //
            this.lblDatum.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.lblDatum.Location = new System.Drawing.Point(371, 146);
            this.lblDatum.Name = "lblDatum";
            this.lblDatum.Size = new System.Drawing.Size(98, 24);
            this.lblDatum.TabIndex = 17;
            this.lblDatum.Text = "Datum Ab";
            this.lblDatum.UseCompatibleTextRendering = true;
            //
            // colBetrag
            //
            this.colBetrag.AppearanceCell.Options.UseTextOptions = true;
            this.colBetrag.AppearanceCell.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
            this.colBetrag.AppearanceHeader.Options.UseTextOptions = true;
            this.colBetrag.AppearanceHeader.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
            this.colBetrag.Caption = "Betrag";
            this.colBetrag.DisplayFormat.FormatString = "N2";
            this.colBetrag.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.colBetrag.FieldName = "Betrag";
            this.colBetrag.Name = "colBetrag";
            this.colBetrag.Visible = true;
            this.colBetrag.VisibleIndex = 5;
            //
            // colBetragZusatz
            //
            this.colBetragZusatz.AppearanceCell.Options.UseTextOptions = true;
            this.colBetragZusatz.AppearanceCell.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
            this.colBetragZusatz.AppearanceHeader.Options.UseTextOptions = true;
            this.colBetragZusatz.AppearanceHeader.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
            this.colBetragZusatz.Caption = "Betrag Zusatz";
            this.colBetragZusatz.DisplayFormat.FormatString = "N2";
            this.colBetragZusatz.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
            this.colBetragZusatz.FieldName = "BetragZusatz";
            this.colBetragZusatz.Name = "colBetragZusatz";
            this.colBetragZusatz.Visible = true;
            this.colBetragZusatz.VisibleIndex = 6;
            //
            // colDatumVon
            //
            this.colDatumVon.Caption = "Datum ab";
            this.colDatumVon.DisplayFormat.FormatString = "dd.MM.yyyy";
            this.colDatumVon.DisplayFormat.FormatType = DevExpress.Utils.FormatType.DateTime;
            this.colDatumVon.FieldName = "DatumVon";
            this.colDatumVon.Name = "colDatumVon";
            this.colDatumVon.Visible = true;
            this.colDatumVon.VisibleIndex = 1;
            this.colDatumVon.Width = 98;
            //
            // colIntVerrechnung_ALBV
            //
            this.colIntVerrechnung_ALBV.AppearanceHeader.Options.UseTextOptions = true;
            this.colIntVerrechnung_ALBV.AppearanceHeader.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Center;
            this.colIntVerrechnung_ALBV.Caption = "WH";
            this.colIntVerrechnung_ALBV.FieldName = "IntVerrechnung_ALBV";
            this.colIntVerrechnung_ALBV.Name = "colIntVerrechnung_ALBV";
            this.colIntVerrechnung_ALBV.Visible = true;
            this.colIntVerrechnung_ALBV.VisibleIndex = 2;
            this.colIntVerrechnung_ALBV.Width = 65;
            //
            // colIntVerrechnung_ALV
            //
            this.colIntVerrechnung_ALV.AppearanceHeader.Options.UseTextOptions = true;
            this.colIntVerrechnung_ALV.AppearanceHeader.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Center;
            this.colIntVerrechnung_ALV.Caption = "WH ALV";
            this.colIntVerrechnung_ALV.FieldName = "IntVerrechnung_ALV";
            this.colIntVerrechnung_ALV.Name = "colIntVerrechnung_ALV";
            this.colIntVerrechnung_ALV.Visible = true;
            this.colIntVerrechnung_ALV.VisibleIndex = 3;
            this.colIntVerrechnung_ALV.Width = 57;
            //
            // colIntVerrechnung_KiZu
            //
            this.colIntVerrechnung_KiZu.AppearanceHeader.Options.UseTextOptions = true;
            this.colIntVerrechnung_KiZu.AppearanceHeader.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Center;
            this.colIntVerrechnung_KiZu.Caption = "WH KiZu";
            this.colIntVerrechnung_KiZu.FieldName = "IntVerrechnung_KiZu";
            this.colIntVerrechnung_KiZu.Name = "colIntVerrechnung_KiZu";
            this.colIntVerrechnung_KiZu.Visible = true;
            this.colIntVerrechnung_KiZu.VisibleIndex = 4;
            this.colIntVerrechnung_KiZu.Width = 57;
            //
            // colPersonName
            //
            this.colPersonName.Caption = "Gläubiger";
            this.colPersonName.FieldName = "PersonName";
            this.colPersonName.Name = "colPersonName";
            this.colPersonName.Visible = true;
            this.colPersonName.VisibleIndex = 0;
            this.colPersonName.Width = 240;
            //
            // gvwInterneVerrechnung
            //
            this.gvwInterneVerrechnung.Appearance.Empty.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(247)))), ((int)(((byte)(239)))), ((int)(((byte)(231)))));
            this.gvwInterneVerrechnung.Appearance.Empty.Options.UseBackColor = true;
            this.gvwInterneVerrechnung.Appearance.FocusedCell.BackColor = System.Drawing.SystemColors.Highlight;
            this.gvwInterneVerrechnung.Appearance.FocusedCell.ForeColor = System.Drawing.SystemColors.HighlightText;
            this.gvwInterneVerrechnung.Appearance.FocusedCell.Options.UseBackColor = true;
            this.gvwInterneVerrechnung.Appearance.FocusedCell.Options.UseForeColor = true;
            this.gvwInterneVerrechnung.Appearance.FocusedRow.BackColor = System.Drawing.SystemColors.Highlight;
            this.gvwInterneVerrechnung.Appearance.FocusedRow.ForeColor = System.Drawing.SystemColors.HighlightText;
            this.gvwInterneVerrechnung.Appearance.FocusedRow.Options.UseBackColor = true;
            this.gvwInterneVerrechnung.Appearance.FocusedRow.Options.UseForeColor = true;
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.BackColor = System.Drawing.Color.Tan;
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.BorderColor = System.Drawing.Color.Tan;
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.Font = new System.Drawing.Font("Arial", 11F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.Options.UseBackColor = true;
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.Options.UseBorderColor = true;
            this.gvwInterneVerrechnung.Appearance.HeaderPanel.Options.UseFont = true;
            this.gvwInterneVerrechnung.Appearance.Row.BackColor = System.Drawing.Color.BlanchedAlmond;
            this.gvwInterneVerrechnung.Appearance.Row.Font = new System.Drawing.Font("Arial", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Pixel);
            this.gvwInterneVerrechnung.Appearance.Row.ForeColor = System.Drawing.Color.Black;
            this.gvwInterneVerrechnung.Appearance.Row.Options.UseBackColor = true;
            this.gvwInterneVerrechnung.Appearance.Row.Options.UseFont = true;
            this.gvwInterneVerrechnung.Appearance.Row.Options.UseForeColor = true;
            this.gvwInterneVerrechnung.Columns.AddRange(new DevExpress.XtraGrid.Columns.GridColumn[] {
                        this.colPersonName,
                        this.colDatumVon,
                        this.colIntVerrechnung_ALBV,
                        this.colIntVerrechnung_ALV,
                        this.colIntVerrechnung_KiZu,
                        this.colBetrag,
                        this.colBetragZusatz});
            this.gvwInterneVerrechnung.GridControl = this.grdInterneVerrechnung;
            this.gvwInterneVerrechnung.Name = "gvwInterneVerrechnung";
            this.gvwInterneVerrechnung.OptionsBehavior.Editable = false;
            this.gvwInterneVerrechnung.OptionsCustomization.AllowFilter = false;
            this.gvwInterneVerrechnung.OptionsCustomization.AllowGroup = false;
            this.gvwInterneVerrechnung.OptionsMenu.EnableColumnMenu = false;
            this.gvwInterneVerrechnung.OptionsMenu.EnableFooterMenu = false;
            this.gvwInterneVerrechnung.OptionsMenu.EnableGroupPanelMenu = false;
            this.gvwInterneVerrechnung.OptionsNavigation.AutoFocusNewRow = true;
            this.gvwInterneVerrechnung.OptionsView.ColumnAutoWidth = false;
            this.gvwInterneVerrechnung.OptionsView.ShowGroupPanel = false;
            //
            // qryInterneVerrechnung
            //
            this.qryInterneVerrechnung.BatchUpdate = true;
            this.qryInterneVerrechnung.CanDelete = true;
            this.qryInterneVerrechnung.CanInsert = true;
            this.qryInterneVerrechnung.CanUpdate = true;
            this.qryInterneVerrechnung.HostControl = this;
            this.qryInterneVerrechnung.SelectStatement = resources.GetString("qryInterneVerrechnung.SelectStatement");
            this.qryInterneVerrechnung.TableName = "IkInterneVerrechnung";
            this.qryInterneVerrechnung.AfterFill += new System.EventHandler(this.qryInterneVerrechnung_AfterFill);
            this.qryInterneVerrechnung.PositionChanged += new System.EventHandler(this.qryInterneVerrechnung_PositionChanged);
            this.qryInterneVerrechnung.BeforePost += new System.EventHandler(this.qryInterneVerrechnung_BeforePost);
            this.qryInterneVerrechnung.AfterInsert += new System.EventHandler(this.qryInterneVerrechnung_AfterInsert);
            this.qryInterneVerrechnung.PositionChanging += new System.EventHandler(this.qryInterneVerrechnung_PositionChanging);
            //
            // qryPerson
            //
            this.qryPerson.HostControl = this;
            this.qryPerson.SelectStatement = resources.GetString("qryPerson.SelectStatement");
            //
            // qryZahlungsweg
            //
            this.qryZahlungsweg.HostControl = this;
            this.qryZahlungsweg.SelectStatement = resources.GetString("qryZahlungsweg.SelectStatement");
            //
            // CtlIkInterneVerrechnung
            //
            this.Controls.Add(this.lblDatum);
            this.Controls.Add(this.lblPerson);
            this.Controls.Add(this.gbxKiZu);
            this.Controls.Add(this.gbxALV);
            this.Controls.Add(this.gbxALBV);
            this.Controls.Add(this.edtDatum);
            this.Controls.Add(this.edtPerson);
            this.Controls.Add(this.grdInterneVerrechnung);
            this.Name = "CtlIkInterneVerrechnung";
            this.Size = new System.Drawing.Size(734, 592);
            this.AddData += new System.EventHandler(this.CtlIkInterneVerrechnung_AddData);
            this.DeleteData += new System.EventHandler(this.CtlIkInterneVerrechnung_DeleteData);
            this.MoveFirst += new System.EventHandler(this.CtlIkInterneVerrechnung_MoveFirst);
            this.MoveNext += new System.EventHandler(this.CtlIkInterneVerrechnung_MoveNext);
            this.SaveData += new System.EventHandler(this.CtlIkInterneVerrechnung_SaveData);
            this.MovePrevious += new System.EventHandler(this.CtlIkInterneVerrechnung_MovePrevious);
            this.RefreshData += new System.EventHandler(this.CtlIkInterneVerrechnung_RefreshData);
            this.UndoDataChanges += new System.EventHandler(this.CtlIkInterneVerrechnung_UndoDataChanges);
            this.SizeChanged += new System.EventHandler(this.CtlIkInterneVerrechnung_SizeChanged);
            this.MoveLast += new System.EventHandler(this.CtlIkInterneVerrechnung_MoveLast);
            ((System.ComponentModel.ISupportInitialize)(this.grdInterneVerrechnung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPerson.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtDatum.Properties)).EndInit();
            this.gbxALBV.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.edtHatALBV.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_ALBV.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBV.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBV)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBVZusatz.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALBVZusatz)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBetrag.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBetragZusatz.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBetrag)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblBetragZusatz)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblIntVerr_ALBV)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblIntVerr_ALBV_Zusatz)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVKonto.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVZusatzName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALBVZusatzKonto.Properties)).EndInit();
            this.gbxALV.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_ALV.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALV.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_ALV)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALVName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memALVKonto.Properties)).EndInit();
            this.gbxKiZu.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.edtHatKiZu.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtIntVerr_KiZu.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_KiZu.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.edtBaZahlungswegID_KiZu)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memKiZuName.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.memKiZuKonto.Properties)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.lblDatum)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.gvwInterneVerrechnung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryInterneVerrechnung)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryPerson)).EndInit();
            ((System.ComponentModel.ISupportInitialize)(this.qryZahlungsweg)).EndInit();
            this.ResumeLayout(false);
        }

        #endregion

        #region Dispose

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        protected override void Dispose(bool disposing)
        {
            if (disposing)
            {
                if ((components != null))
                {
                    components.Dispose();
                }
            }
            base.Dispose(disposing);
        }

        #endregion

        #region Properties

        #region Private Properties

        private bool CanEdit
        {
            get
            {
                return (
                    qryInterneVerrechnung.CanUpdate &&
                    qryInterneVerrechnung.Count > 0 &&
                    !LeistungIstGeschlossen
                );
            }
        }

        #endregion

        #endregion

        #region EventHandlers

        #region Private EventHandlers

        private void AuswahlZahlungswegEinstelllen_ALBV()
        {
            bool HatALBV = Utils.ConvertToBool(qryInterneVerrechnung["HatALBV"], false);
            bool IntVerr = Utils.ConvertToBool(qryInterneVerrechnung["IntVerrechnung_ALBV"], true);
           
            // Stellt die Auswahl des Zahlungsweges ein:
            edtBaZahlungswegID_ALBV.EditMode = (CanEdit && HatALBV && !IntVerr) ? EditModeType.Normal : EditModeType.ReadOnly;
        }

        private void AuswahlZahlungswegEinstelllen_ALBVZusatz()
        {
            bool HatALBV = Utils.ConvertToBool(qryInterneVerrechnung["HatALBV"], false);
            
            // Stellt die Auswahl des Zahlungsweges ein:
            edtBaZahlungswegID_ALBVZusatz.EditMode = (CanEdit && HatALBV) ? EditModeType.Normal : EditModeType.ReadOnly;
        }

        private void AuswahlZahlungswegEinstelllen_ALV()
        {
            bool IntVerr = Utils.ConvertToBool(qryInterneVerrechnung["IntVerrechnung_ALV"], true);
            
            // Stellt die Auswahl des Zahlungsweges ein:
            edtBaZahlungswegID_ALV.EditMode = (CanEdit && !IntVerr) ? EditModeType.Normal : EditModeType.ReadOnly;
        }

        private void AuswahlZahlungswegEinstelllen_KiZu()
        {
            bool HatKiZu = Utils.ConvertToBool(qryInterneVerrechnung["HatKiZu"], false);
            bool IntVerr = Utils.ConvertToBool(qryInterneVerrechnung["IntVerrechnung_KiZu"], true);
            
            // Stellt die Auswahl des Zahlungsweges ein:
            edtBaZahlungswegID_KiZu.EditMode = (CanEdit && HatKiZu && !IntVerr) ? EditModeType.Normal : EditModeType.ReadOnly;
        }

        private void CtlIkInterneVerrechnung_AddData(object sender, EventArgs e)
        {
            if (qryPerson.Count == 0)
            {
                KissMsg.ShowInfo("Es existieren noch keine Gläubiger.\r\nErfassen Sie zuerst einen Rechtstitel und dazugehörende Gläubiger.");
                return;
            }
            qryInterneVerrechnung.Insert();
            qryInterneVerrechnung.RowModified = true;
            DatenGlaeubigerWurdenKorrigiert = true;
        }

        private void CtlIkInterneVerrechnung_DeleteData(object sender, EventArgs e)
        {
            DatenGlaeubigerWurdenKorrigiert = true;
            qryInterneVerrechnung.Delete();
        }

        private void CtlIkInterneVerrechnung_MoveFirst(object sender, EventArgs e)
        {
            qryInterneVerrechnung.First();
        }

        private void CtlIkInterneVerrechnung_MoveLast(object sender, EventArgs e)
        {
            qryInterneVerrechnung.Last();
        }

        private void CtlIkInterneVerrechnung_MoveNext(object sender, EventArgs e)
        {
            qryInterneVerrechnung.Next();
        }

        private void CtlIkInterneVerrechnung_MovePrevious(object sender, EventArgs e)
        {
            qryInterneVerrechnung.Previous();
        }

        private void CtlIkInterneVerrechnung_RefreshData(object sender, EventArgs e)
        {
            if (!AllesSpeichern()) throw new KissCancelException();
            // Daten neu anzeigen:
            InterneVerrechnungOeffnen();
        }

        private void CtlIkInterneVerrechnung_SaveData(object sender, EventArgs e)
        {
            if (!AllesSpeichern()) throw new KissCancelException();
        }

        private void CtlIkInterneVerrechnung_SizeChanged(object sender, EventArgs e)
        {
            int BoxMiddleDistance = 8;
            int MemoMiddleDistance = 8;

            int BoxLeftRightDistance = 6;
            int MemoLeftRightDistance = 8;

            int UpperBoxWidth = this.Size.Width - BoxLeftRightDistance - BoxLeftRightDistance;
            int LowerBoxWidth = (this.Size.Width - BoxMiddleDistance - BoxLeftRightDistance - BoxLeftRightDistance) / 2;
            int LookupWidth = LowerBoxWidth - MemoLeftRightDistance - MemoLeftRightDistance;
            int MemoWidth = (LookupWidth - MemoMiddleDistance ) / 2;

            // Auswahl Person links:
            edtPerson.Width = LowerBoxWidth;

            // Groupbox oben:
            gbxALBV.Left = BoxLeftRightDistance;
            gbxALBV.Width = UpperBoxWidth;
            // Groupbox unten:
            gbxALV.Left = BoxLeftRightDistance;
            gbxALV.Width = LowerBoxWidth;
            gbxKiZu.Left = gbxALV.Left + gbxALV.Width + BoxMiddleDistance;
            gbxKiZu.Width = LowerBoxWidth;
            // Auswahl Datum rechts:
            lblDatum.Left = gbxKiZu.Left + BoxMiddleDistance;
            edtDatum.Left = gbxKiZu.Left + BoxMiddleDistance;

            // Inhalte in Box ALBV einstellen:
            // OBEN:
            edtIntVerr_ALBV.Left = MemoLeftRightDistance;
            lblIntVerr_ALBV.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_ALBV.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_ALBV.Width = LookupWidth;
            edtBaZahlungswegID_ALBVZusatz.Width = LookupWidth;
            edtBaZahlungswegID_ALBVZusatz.Left = edtBaZahlungswegID_ALBV.Left +
                LookupWidth + BoxMiddleDistance +
                MemoLeftRightDistance + MemoLeftRightDistance;
            lblIntVerr_ALBV_Zusatz.Left = edtBaZahlungswegID_ALBVZusatz.Left;
            // Betragsfelder
            lblBetrag.Left = edtBaZahlungswegID_ALBV.Left + LookupWidth -
                edtBetrag.Width - lblBetrag.Width;
            edtBetrag.Left = edtBaZahlungswegID_ALBV.Left + LookupWidth -
                edtBetrag.Width;
            lblBetragZusatz.Left = edtBaZahlungswegID_ALBVZusatz.Left + LookupWidth -
                edtBetragZusatz.Width - lblBetragZusatz.Width;
            edtBetragZusatz.Left = edtBaZahlungswegID_ALBVZusatz.Left + LookupWidth -
                edtBetragZusatz.Width;
            
            // Memos ALBV
            memALBVName.Width = MemoWidth;
            memALBVKonto.Left = memALBVName.Left + memALBVName.Width + MemoMiddleDistance;
            memALBVKonto.Width = MemoWidth;
            // Memos ALBV Zusatz
            memALBVZusatzName.Left = edtBaZahlungswegID_ALBVZusatz.Left;
            memALBVZusatzName.Width = MemoWidth;
            memALBVZusatzKonto.Left = memALBVZusatzName.Left + memALBVName.Width + MemoMiddleDistance;
            memALBVZusatzKonto.Width = MemoWidth;

            // UNTEN: links: ALV
            edtIntVerr_ALV.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_ALV.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_ALV.Width = LookupWidth;
            // Memos ALV
            memALVName.Left = MemoLeftRightDistance;
            memALVName.Width = MemoWidth;
            memALVKonto.Left = memALVName.Left + memALVName.Width + MemoMiddleDistance;
            memALVKonto.Width = MemoWidth;

            // UNTEN: rechts: KiZu
            edtIntVerr_KiZu.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_KiZu.Left = MemoLeftRightDistance;
            edtBaZahlungswegID_KiZu.Width = LookupWidth;
            // Memos KiZu
            memKiZuName.Left = MemoLeftRightDistance;
            memKiZuName.Width = MemoWidth;
            memKiZuKonto.Left = memKiZuName.Left + memKiZuName.Width + MemoMiddleDistance;
            memKiZuKonto.Width = MemoWidth;
        }

        private void CtlIkInterneVerrechnung_UndoDataChanges(object sender, EventArgs e)
        {
            qryInterneVerrechnung.Cancel();
            // Daten neu anzeigen:
            InterneVerrechnungOeffnen();
        }

        private void edtBaZahlungswegID_ALBVZusatz_CloseUp(object sender, DevExpress.XtraEditors.Controls.CloseUpEventArgs e)
        {
            e.AcceptValue = true;
            if (!e.CloseMode.Equals(DevExpress.XtraEditors.PopupCloseMode.Normal)) return;

            if (DBUtil.IsEmpty(e.Value))
            {
                // Wenn der Zahlweg gelöscht wird, sollen die Beträge auch gelöscht werden
                edtBetrag.EditValue = DBNull.Value;
                edtBetragZusatz.EditValue = DBNull.Value;
                qryInterneVerrechnung["Betrag"] = DBNull.Value;
                qryInterneVerrechnung["BetragZusatz"] = DBNull.Value;
            }
        }

        private void edtBaZahlungswegID_ALBVZusatz_EditValueChanged(object sender, System.EventArgs e)
        {
            EditierenBetragEinstellen();
            // Tooltips setzen
            SetZahlwegMemos("ALBVZusatz");
        }

        private void edtBaZahlungswegID_ALBV_EditValueChanged(object sender, System.EventArgs e)
        {
            // Tooltips setzen
            SetZahlwegMemos("ALBV");
        }

        private void edtBaZahlungswegID_ALV_EditValueChanged(object sender, System.EventArgs e)
        {
            // Tooltips setzen
            SetZahlwegMemos("ALV");
        }

        private void edtBaZahlungswegID_KiZu_EditValueChanged(object sender, System.EventArgs e)
        {
            // Tooltips setzen
            SetZahlwegMemos("KiZu");
        }

        private void edtBetragZusatz_EditValueChanged(object sender, System.EventArgs e)
        {
            if (!edtBetragZusatz.UserModified) return;

            qryInterneVerrechnung["BetragZusatz"] = edtBetragZusatz.EditValue;
            if (!DBUtil.IsEmpty(qryInterneVerrechnung["Betrag"]))
            {
                qryInterneVerrechnung["Betrag"] = DBNull.Value;
                qryInterneVerrechnung.RefreshDisplay();
            }
            qryInterneVerrechnung.RowModified = true;
        }

        private void edtBetrag_EditValueChanged(object sender, System.EventArgs e)
        {
            if (!edtBetrag.UserModified) return;

            qryInterneVerrechnung["Betrag"] = edtBetrag.EditValue;
            if (!DBUtil.IsEmpty(qryInterneVerrechnung["BetragZusatz"]))
            {
                qryInterneVerrechnung["BetragZusatz"] = DBNull.Value;
                qryInterneVerrechnung.RefreshDisplay();
            }
            qryInterneVerrechnung.RowModified = true;
        }

        private void edtHatALBV_CheckedChanged(object sender, EventArgs e)
        {
            // Nur wenn der User editiert geändert hat
            if (!edtHatALBV.UserModified) return;

            // HACK: ohne diesen Code funzt gar nichts. Müsste wohl noch geklärt werden
            edtHatALBV.EditValue = edtHatALBV.Checked;
            qryInterneVerrechnung["HatALBV"] = edtHatALBV.Checked;
            
            if (!edtHatALBV.Checked)
            {
                qryInterneVerrechnung["IntVerrechnung_ALBV"] = DBNull.Value;
                edtIntVerr_ALBV.EditValue = DBNull.Value;
                qryInterneVerrechnung["BaZahlungswegID_ALBV"] = DBNull.Value;
                edtBaZahlungswegID_ALBV.EditValue = DBNull.Value;
                qryInterneVerrechnung["BaZahlungswegID_ALBVZusatz"] = DBNull.Value;
                edtBaZahlungswegID_ALBVZusatz.EditValue = DBNull.Value;
                qryInterneVerrechnung["Betrag"] = DBNull.Value;
                edtBetrag.EditValue = DBNull.Value;
                qryInterneVerrechnung["BetragZusatz"] = DBNull.Value;
                edtBetragZusatz.EditValue = DBNull.Value;
                // Memos setzen
                SetZahlwegMemos("ALBV");
                SetZahlwegMemos("ALBVZusatz");
            }
            else
            {
                edtIntVerr_ALBV.Checked = false;
                edtIntVerr_ALBV.EditValue = false;
                qryInterneVerrechnung["IntVerrechnung_ALBV"] = false;
            }
            EditierenALBVEinstellen();
        }

        private void edtHatKiZu_CheckedChanged(object sender, EventArgs e)
        {
            // Nur wenn der User editiert geändert hat
            if (!edtHatKiZu.UserModified) return;

            // HACK: ohne diesen Code funzt gar nichts. Müsste wohl noch geklärt werden
            edtHatKiZu.EditValue = edtHatKiZu.Checked;
            qryInterneVerrechnung["HatKiZu"] = edtHatKiZu.Checked;

            if (!edtHatKiZu.Checked)
            {
                qryInterneVerrechnung["IntVerrechnung_KiZu"] = DBNull.Value;
                edtIntVerr_KiZu.EditValue = DBNull.Value;
                qryInterneVerrechnung["BaZahlungswegID_KiZu"] = DBNull.Value;
                edtBaZahlungswegID_KiZu.EditValue = DBNull.Value;
                // Memos setzen
                SetZahlwegMemos("KiZu");
            }
            else
            {
                edtIntVerr_KiZu.Checked = false;
                edtIntVerr_KiZu.EditValue = false;
                qryInterneVerrechnung["IntVerrechnung_KiZu"] = false;
            }
            EditierenKiZuEinstellen();
        }

        private void edtIntVerr_ALBV_CheckedChanged(object sender, EventArgs e)
        {
            // Nur wenn der User editiert geändert hat
            if (!edtIntVerr_ALBV.UserModified) return;

            // HACK: ohne diesen Code funzt gar nichts. Müsste wohl noch geklärt werden
            edtIntVerr_ALBV.EditValue = edtIntVerr_ALBV.Checked;
            qryInterneVerrechnung["IntVerrechnung_ALBV"] = edtIntVerr_ALBV.Checked;

            // Zahlungsweg löschen, wenn nicht verwendet
            if (edtIntVerr_ALBV.Checked)
            {
                qryInterneVerrechnung["BaZahlungswegID_ALBV"] = DBNull.Value;
                edtBaZahlungswegID_ALBV.EditValue = DBNull.Value;
            }

            // Editieren in der Auswahl einstellen
            AuswahlZahlungswegEinstelllen_ALBV();
            AuswahlZahlungswegEinstelllen_ALBVZusatz();
        }

        private void edtIntVerr_ALV_CheckedChanged(object sender, EventArgs e)
        {
            // Nur wenn der User editiert geändert hat
            if (!edtIntVerr_ALV.UserModified) return;

            // HACK: ohne diesen Code funzt gar nichts. Müsste wohl noch geklärt werden
            edtIntVerr_ALV.EditValue = edtIntVerr_ALV.Checked;
            qryInterneVerrechnung["IntVerrechnung_ALV"] = edtIntVerr_ALV.Checked;

            // Zahlungsweg löschen, wenn nicht verwendet
            if (edtIntVerr_ALV.Checked)
            {
                qryInterneVerrechnung["BaZahlungswegID_ALV"] = DBNull.Value;
                edtBaZahlungswegID_ALV.EditValue = DBNull.Value;
            }

            // Editieren in der Auswahl einstellen
            AuswahlZahlungswegEinstelllen_ALV();
        }

        private void edtIntVerr_KiZu_CheckedChanged(object sender, EventArgs e)
        {
            // Nur wenn der User editiert geändert hat
            if (!edtIntVerr_KiZu.UserModified) return;

            // HACK: ohne diesen Code funzt gar nichts. Müsste wohl noch geklärt werden
            edtIntVerr_KiZu.EditValue = edtIntVerr_KiZu.Checked;
            qryInterneVerrechnung["IntVerrechnung_KiZu"] = edtIntVerr_KiZu.Checked;

            // Zahlungsweg löschen, wenn nicht verwendet
            if (edtIntVerr_KiZu.Checked)
            {
                qryInterneVerrechnung["BaZahlungswegID_KiZu"] = DBNull.Value;
                edtBaZahlungswegID_KiZu.EditValue = DBNull.Value;
            }

            // Editieren in der Auswahl einstellen
            AuswahlZahlungswegEinstelllen_KiZu();
        }

        private void qryInterneVerrechnung_AfterFill(object sender, System.EventArgs e)
        {
            DatenGlaeubigerWurdenKorrigiert = false;
            if (qryInterneVerrechnung.Count == 0) qryInterneVerrechnung_PositionChanged(sender, e);
        }

        private void qryInterneVerrechnung_AfterInsert(object sender, System.EventArgs e)
        {
            // 18.02.2009 : sozheo : neu optionales Auffüllen
            // 25.03.2009 : sozheo : neu mit optionalem Auffüllen ALBV und KiZu

            qryInterneVerrechnung["FaLeistungID"] = FaLeistungID;

            if (FaProzessCode == 405)
            {
                // Bei ALBV
                qryInterneVerrechnung["HatALBV"] = false;
                qryInterneVerrechnung["HatKiZu"] = false;
                qryInterneVerrechnung["IntVerrechnung_ALV"] = false;
            }
            else
            {
                // Bei UEBH und KKBB
                qryInterneVerrechnung["HatALBV"] = true;
                qryInterneVerrechnung["HatKiZu"] = false;
                qryInterneVerrechnung["IntVerrechnung_ALBV"] = false;
                qryInterneVerrechnung["IntVerrechnung_ALV"] = true;
            }

            qryInterneVerrechnung_PositionChanged(sender, e);
            edtPerson.Focus();
        }

        private void qryInterneVerrechnung_BeforePost(object sender, System.EventArgs e)
        {
            // 18.02.2009 : sozheo : neu optionales Auffüllen
            // 25.03.2009 : sozheo : neu mit optionalem Auffüllen ALBV und KiZu

            // Kontrolle Person
            DBUtil.CheckNotNullField(edtPerson, lblPerson.Text);

            // Kontrolle Datum
            DBUtil.CheckNotNullField(edtDatum, lblDatum.Text);
            if (((DateTime)edtDatum.EditValue).ToString("dd") != "01")
            {
                KissMsg.ShowInfo("Das Datum muss immer der erste Tag eines Monats sein.");
                throw new KissCancelException();
            }

            // Kontrolle Datum eindeutig
            bool HatDoppeltesDatum = false;
            int PersonID = Utils.ConvertToInt(qryInterneVerrechnung["BaPersonID"]);
            DateTime AktDatum = (DateTime)qryInterneVerrechnung["DatumVon"];
            foreach (System.Data.DataRow row in qryInterneVerrechnung.DataTable.Rows)
            {
                if (!qryInterneVerrechnung.Row.Equals(row) && row.RowState != System.Data.DataRowState.Deleted)
                if ((DateTime)row["DatumVon"] == AktDatum && Utils.ConvertToInt(row["BaPersonID"]) == PersonID)
                {
                    HatDoppeltesDatum = true;
                    break;
                }
            }
            if (HatDoppeltesDatum)
            {
                KissMsg.ShowInfo(string.Format(
                    "Das Datum {0} wird beim Gläubiger '{1}' doppelt verwendet.",
                    AktDatum.ToString("dd.MM.yyyy"),
                    edtPerson.GetDisplayText(edtPerson.EditValue)
                ));
                throw new KissCancelException();
            }

            // Kontrolle Zahlungsweg ALBV
            // Kontrolle interne Verrechnung - Zahlungsweg ALBV
            if (!ZahlungswegIstGewaehlt("ALBV", PCodeText)) throw new KissCancelException();

            // Kontrolle Zahlungsweg ALV
            // Kontrolle Zahlungsweg KiZu
            if (FaProzessCode == 405)
            {
                if (!ZahlungswegIstGewaehlt("ALV", "ALV")) throw new KissCancelException();
                if (!ZahlungswegIstGewaehlt("KiZu", "Kinderzulagen")) throw new KissCancelException();
            }

            // Kontrolle, ob Eingabe bei Beträgen notwendig ist
            if (
                (!DBUtil.IsEmpty(qryInterneVerrechnung["BaZahlungswegID_ALBVZusatz"])) &&
                DBUtil.IsEmpty(qryInterneVerrechnung["Betrag"]) &&
                DBUtil.IsEmpty(qryInterneVerrechnung["BetragZusatz"])
            )
            {
                KissMsg.ShowInfo("Wenn Sie einen Teil-Zahlungsweg angeben, müssen Sie bei einem Zahlungsweg einen Betrag definieren.");
                throw new KissCancelException();
            }

            // Checken, ob bei jedem Zahlweg ein korrektes Bankkonto hinterlegt ist
            if (!ZahlwegGueltigkeitenChecken()) throw new KissCancelException();

            // Spalte im Gitter aktualisieren
            qryInterneVerrechnung["PersonName"] = edtPerson.GetDisplayText(edtPerson.EditValue);

            DatenGlaeubigerWurdenKorrigiert = true;

            // Checken, ob bei jedem Zahlweg ein korrektes Bankkonto hinterlegt ist
            IBANNummernChecken();
        }

        private void qryInterneVerrechnung_PositionChanged(object sender, System.EventArgs e)
        {
            // 25.03.2009 : sozheo : neu mit optionalem Auffüllen ALBV und KiZu

            EditModeType EMode = (CanEdit) ? EditModeType.Normal : EditModeType.ReadOnly;
            edtDatum.EditMode = EMode;
            edtPerson.EditMode = EMode;
            edtHatALBV.EditMode = EMode;
            edtHatKiZu.EditMode = EMode;

            EditierenALBVEinstellen();
            EditierenALVEinstellen();
            EditierenKiZuEinstellen();
            EditierenBetragEinstellen();

            // Tooltips setzen
            SetZahlwegMemos("ALBV");
            SetZahlwegMemos("ALBVZusatz");
            if (HatALVundKIZU) SetZahlwegMemos("ALV");
            if (HatALVundKIZU) SetZahlwegMemos("KiZu");
        }

        private void qryInterneVerrechnung_PositionChanging(object sender, System.EventArgs e)
        {
            if (!qryInterneVerrechnung.Post()) throw new KissCancelException();
        }

        #endregion

        #endregion

        #region Methods

        #region Public Methods

        public bool AllesSpeichern()
        {
            // 13.03.2009 : sozheo : IBANNummernChecken() wieder hinzugefügt
            // 25.03.2009 : sozheo : neu mit optionalem Auffüllen ALBV und KiZu
            if (LeistungIstGeschlossen) return true;

            if (qryInterneVerrechnung.Count > 0)
            {
                qryInterneVerrechnung.EndCurrentEdit();
                qryInterneVerrechnung.Row.EndEdit();
            }

            if (qryInterneVerrechnung.RowModified) if (!qryInterneVerrechnung.Post()) return false;
            if (!DatenGlaeubigerWurdenKorrigiert) return true;

            string aSQL = "";
            Session.BeginTransaction();
            try
            {
                foreach (System.Data.DataRow row in qryInterneVerrechnung.DataTable.Rows)
                if (row.RowState == System.Data.DataRowState.Added)
                {
                    // Einfügen:
                    aSQL = string.Format(@"
                        INSERT INTO dbo.IkInterneVerrechnung(
                        FaLeistungID, BaPersonID, DatumVon, HatALBV, HatKiZu,
                        IntVerrechnung_ALBV, IntVerrechnung_ALV, IntVerrechnung_KiZu,
                        BaZahlungswegID_ALBV, BaZahlungswegID_ALBVZusatz,
                        BaZahlungswegID_ALV, BaZahlungswegID_KiZu,
                        Betrag, BetragZusatz )
                        VALUES
                        ({0},{1},'{2}',{3},{4},{5},{6},{7},{8},{9},{10},{11},{12},{13}) ",
                        FaLeistungID.ToString(),
                        Utils.ConvertToInt(row["BaPersonID"]).ToString(),
                        ((DateTime)row["DatumVon"]).ToString("yyyyMMdd"),
                        Utils.ConvertToBool(row["HatALBV"], false) ? "1" : "0",
                        Utils.ConvertToBool(row["HatKiZu"], false) ? "1" : "0",
                        DBUtil.IsEmpty(row["IntVerrechnung_ALBV"]) ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_ALBV"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["IntVerrechnung_ALV"])  ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_ALV"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["IntVerrechnung_KiZu"]) ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_KiZu"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALBV"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALBV"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALBVZusatz"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALBVZusatz"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALV"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALV"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_KiZu"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_KiZu"]).ToString(),
                        DBUtil.IsEmpty(row["Betrag"]) ? "NULL" : Utils.ConvertToDecimal(row["Betrag"]).ToString("N2"),
                        DBUtil.IsEmpty(row["BetragZusatz"]) ? "NULL" : Utils.ConvertToDecimal(row["BetragZusatz"]).ToString("N2")
                    );
                    DBUtil.ExecSQL(aSQL);
                }
                else if (row.RowState == System.Data.DataRowState.Deleted)
                {
                    // Löschen:
                    DBUtil.ExecSQL(
                        "DELETE dbo.IkInterneVerrechnung WHERE IkInterneVerrechnungID = {0}",
                        Utils.ConvertToInt(row["IkInterneVerrechnungID", DataRowVersion.Original])
                    );
                }
                else if (row.RowState == System.Data.DataRowState.Modified)
                {
                    // Update:
                    aSQL = string.Format(@"
                        UPDATE dbo.IkInterneVerrechnung SET
                        FaLeistungID = {0},
                        BaPersonID = {1},
                        DatumVon = '{2}',
                        HatALBV = {3},
                        HatKiZu = {4},
                        IntVerrechnung_ALBV = {5},
                        IntVerrechnung_ALV = {6},
                        IntVerrechnung_KiZu = {7},
                        BaZahlungswegID_ALBV = {8},
                        BaZahlungswegID_ALBVZusatz = {9},
                        BaZahlungswegID_ALV = {10},
                        BaZahlungswegID_KiZu = {11},
                        Betrag = {12},
                        BetragZusatz = {13}
                        WHERE IkInterneVerrechnungID = {14}",
                        FaLeistungID.ToString(),
                        Utils.ConvertToInt(row["BaPersonID"]).ToString(),
                        ((DateTime)row["DatumVon"]).ToString("yyyyMMdd"),
                        Utils.ConvertToBool(row["HatALBV"], false) ? "1" : "0",
                        Utils.ConvertToBool(row["HatKiZu"], false) ? "1" : "0",
                        DBUtil.IsEmpty(row["IntVerrechnung_ALBV"]) ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_ALBV"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["IntVerrechnung_ALV"])  ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_ALV"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["IntVerrechnung_KiZu"]) ? "NULL" : (Utils.ConvertToBool(row["IntVerrechnung_KiZu"], true) ? "1" : "0"),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALBV"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALBV"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALBVZusatz"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALBVZusatz"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_ALV"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_ALV"]).ToString(),
                        DBUtil.IsEmpty(row["BaZahlungswegID_KiZu"]) ? "NULL" : Utils.ConvertToInt(row["BaZahlungswegID_KiZu"]).ToString(),
                        DBUtil.IsEmpty(row["Betrag"]) ? "NULL" : Utils.ConvertToDecimal(row["Betrag"]).ToString("N2"),
                        DBUtil.IsEmpty(row["BetragZusatz"]) ? "NULL" : Utils.ConvertToDecimal(row["BetragZusatz"]).ToString("N2"),
                        Utils.ConvertToInt(row["IkInterneVerrechnungID"])
                    );
                    DBUtil.ExecSQL(aSQL);
                }

                // Hier wird die interne Verrechnung und der Zahlungsweg für alle exsitierende Buchungen korrigiert
                // Nur bei jenen Daten, welche noch nicht ans PSCD gesendet wurden
                VorhandeneBuchungenKorrigieren();

                Session.Commit();
            }
            catch (Exception ex)
            {
                Session.Rollback();
                KissMsg.ShowInfo(ex.Message);
                return false;
            }
            DatenGlaeubigerWurdenKorrigiert = false;

            // sofortiges Refresh machen
            qryInterneVerrechnung.Refresh();
            return true;
        }

        public void Init(int FallID, int LeistungID, int ProzessCode,bool LeistgGeschlossen)
        {
            FaFallID = FallID;
            FaLeistungID = LeistungID;
            FaProzessCode = ProzessCode;
            HatALVundKIZU = (FaProzessCode == 405);
            LeistungIstGeschlossen = LeistgGeschlossen;

            if (FaProzessCode == 405) PCodeText = "ALBV"; else
            if (FaProzessCode == 406) PCodeText = "ÜbH"; else
            if (FaProzessCode == 407) PCodeText = "KKBB";

            if (FaProzessCode == 405) PCodeTextZusatz = "ALBV-Zusatz"; else
            if (FaProzessCode == 406) PCodeTextZusatz = "ÜbH-Zusatz"; else
            if (FaProzessCode == 407) PCodeTextZusatz = "KKBB-Zusatz";

            gbxALBV.Text = PCodeText;
            edtIntVerr_ALBV.Text = "Interne Verrechnung " + PCodeText;
            lblIntVerr_ALBV.Text = "Zahlungsweg " + PCodeText;
            lblIntVerr_ALBV_Zusatz.Text = "Teilzahlungsweg " + PCodeText;
            colIntVerrechnung_ALBV.Caption = "WH " + PCodeText;

            gbxALV.Visible = HatALVundKIZU;
            gbxKiZu.Visible = HatALVundKIZU;
            edtHatALBV.Visible = HatALVundKIZU;

            colIntVerrechnung_ALV.Visible = HatALVundKIZU;
            colIntVerrechnung_KiZu.Visible = HatALVundKIZU;

            if (!HatALVundKIZU)
            {
                grdInterneVerrechnung.Height = grdInterneVerrechnung.Height + gbxALV.Height;
                lblPerson.Top = lblPerson.Top + gbxALV.Height;
                edtPerson.Top = edtPerson.Top + gbxALV.Height;
                lblDatum.Top = lblPerson.Top;
                edtDatum.Top = edtPerson.Top;
                gbxALBV.Top = gbxALBV.Top + gbxALV.Height;
            }

            // Wenn Leistung geschlossen ist, dann alles sperren
            if (LeistungIstGeschlossen)
            {
                qryInterneVerrechnung.CanUpdate = false;
                qryInterneVerrechnung.CanInsert = false;
                qryInterneVerrechnung.CanDelete = false;
            }

            // Layout erstellen
            CtlIkInterneVerrechnung_SizeChanged(null, null);
            memALBVName.Font = new Font("Arial", 8);
            memALBVKonto.Font = new Font("Arial", 8);
            memALBVZusatzName.Font = new Font("Arial", 8);
            memALBVZusatzKonto.Font = new Font("Arial", 8);
            memALVName.Font = new Font("Arial", 8);
            memALVKonto.Font = new Font("Arial", 8);
            memKiZuName.Font = new Font("Arial", 8);
            memKiZuKonto.Font = new Font("Arial", 8);

            grdInterneVerrechnung.Focus();

            // Daten neu anzeigen:
            InterneVerrechnungOeffnen();
        }

        #endregion

        #region Private Methods

        private void EditierenALBVEinstellen()
        {
            bool HatALBV = Utils.ConvertToBool(qryInterneVerrechnung["HatALBV"], false);

            // Auswahl einstellen
            edtIntVerr_ALBV.EditMode = (CanEdit && HatALBV) ? EditModeType.Normal : EditModeType.ReadOnly;
            AuswahlZahlungswegEinstelllen_ALBV();
            AuswahlZahlungswegEinstelllen_ALBVZusatz();
        }

        private void EditierenALVEinstellen()
        {
            // Auswahl einstellen
            edtIntVerr_ALV.EditMode = (CanEdit) ? EditModeType.Normal : EditModeType.ReadOnly;
            AuswahlZahlungswegEinstelllen_ALV();
        }

        private void EditierenBetragEinstellen()
        {
            // Eltern?
            // TODO: Geht nicht mehr, da das Flag IstElternteil über mehrere RT verteilt ist.
            // Sollte zwar eindeutig sein...

            bool HatALBV = Utils.ConvertToBool(qryInterneVerrechnung["HatALBV"], false);
            // ALBV Betrag nur bei Kinder
            bool CanEditDet = (
                CanEdit && HatALBV &&
                !DBUtil.IsEmpty(edtBaZahlungswegID_ALBVZusatz.EditValue)
                //!DBUtil.IsEmpty(edtIntVerr_ALBV.EditValue)
                // && TODO !IstElternteil
            );
            EditModeType EMode = CanEditDet ? EditModeType.Normal : EditModeType.ReadOnly;
            edtBetrag.EditMode = EMode;
            edtBetragZusatz.EditMode = EMode;
        }

        private void EditierenKiZuEinstellen()
        {
            bool HatKiZu = Utils.ConvertToBool(qryInterneVerrechnung["HatKiZu"], false);
            
            // Auswahl einstellen
            edtIntVerr_KiZu.EditMode = (CanEdit && HatKiZu) ? EditModeType.Normal : EditModeType.ReadOnly;
            AuswahlZahlungswegEinstelllen_KiZu();
        }

        private void EinZahlwegKontrollieren(int ZahlwegID)
        {
            string msg = "";
            SqlQuery sql;

            // Kontrolle IBAN
            sql = DBUtil.OpenSQL(@"
                select Z.BaZahlungswegID, Z.IBANNummer, PersonName = P.Name + isNULL(' ' + P.Vorname, '')
                from dbo.BaZahlungsweg Z WITH(READUNCOMMITTED)
                left join dbo.BaPerson P WITH(READUNCOMMITTED) on P.BaPersonID = Z.BaPersonID
                where Z.BaZahlungswegID = {0} and Z.EinzahlungsscheinCode in (2,3,4,5)",
                ZahlwegID
            );

            if (!DBUtil.IsEmpty(sql["BaZahlungswegID"]) && DBUtil.IsEmpty(sql["IBANNummer"]))
            {
                if (msg != "") msg += "\r\n";
                msg += Utils.ConvertToString(sql["PersonName"]); // + ", " + Utils.ConvertToString(row["ZahlungswegName"]);
            }

            if (msg != "")
            {
                KissMsg.ShowInfo(string.Format(
                    "Bei den foglenden Zahlungswegen ist die IBAN-Nummer nicht definiert.\r\n\r\n" +
                    "{0}\r\n\r\n" +
                    "Ohne IBAN-Nummer können keine Zahlungen an PSCD gesendet werden.",
                    msg
                ));
            }

            // Kontrolle Wohnsitz
            msg = "";
            sql = DBUtil.OpenSQL(@"
                select top 1 Z.BaPersonID, A.PLZ, A.Ort, PersonName = P.Name + isNULL(' ' + P.Vorname, '')
                from dbo.BaZahlungsweg Z
                left join dbo.BaPerson P WITH(READUNCOMMITTED) on P.BaPersonID = Z.BaPersonID
                left join dbo.BaAdresse A WITH(READUNCOMMITTED) on A.BaPersonID = Z.BaPersonID
                where Z.BaZahlungswegID = {0} and AdresseCode = 1
                and GetDate() between IsNull(A.DatumVon, GetDate()) and IsNull(A.DatumBis, GetDate())
                order by IsNull(A.DatumVon, GetDate()) desc",
                ZahlwegID
            );
            if (!DBUtil.IsEmpty(sql["BaPersonID"]) && DBUtil.IsEmpty(sql["PLZ"]) && DBUtil.IsEmpty(sql["Ort"]))
            {
                if (msg != "") msg += "\r\n";
                msg += Utils.ConvertToString(sql["PersonName"]) + ": Wohnsitz PLZ und Ort fehlen";
            }
            if (msg != "")
            {
                KissMsg.ShowInfo(string.Format(
                    "Bei der folgenden Person ist die Wohnsitzadresse nicht definiert.\r\n\r\n" +
                    "{0}\r\n\r\n" +
                    "Ohne Wohnsitz können die Zeilen im PSCD nicht verarbeitet werden.",
                    msg
                ));
           }
        }

        private void FillZWInfos(int BaZwID, KissMemoEdit Name, KissMemoEdit Konto)
        {
            if (qryZahlungsweg.Find("Code=" + BaZwID.ToString()))
            {
                Name.Text = Utils.ConvertToString(qryZahlungsweg["MemoName"]);
                Konto.Text = Utils.ConvertToString(qryZahlungsweg["MemoKonto"]);
            }
            else
            {
                Name.Text = "";
                Konto.Text = "";
            }
        }

        private void IBANNummernChecken()
        {
            // Zahlweg ALBV
            int ZahlwegIDALBV = Utils.ConvertToInt(qryInterneVerrechnung["BaZahlungswegID_ALBV"]);
            // Zahlweg ALBV Zusatz
            int ZahlwegIDALBVZusatz = Utils.ConvertToInt(qryInterneVerrechnung["BaZahlungswegID_ALBVZusatz"]);
            // Zahlweg ALV
            int ZahlwegIDALV = Utils.ConvertToInt(qryInterneVerrechnung["BaZahlungswegID_ALV"]);
            // Zahlweg KiZu
            int ZahlwegIDKiZu = Utils.ConvertToInt(qryInterneVerrechnung["BaZahlungswegID_KiZu"]);

            // Kontrolle IBAN
            if (ZahlwegIDALBV>0) EinZahlwegKontrollieren(ZahlwegIDALBV);
            if (ZahlwegIDALBVZusatz>0 && ZahlwegIDALBVZusatz != ZahlwegIDALBV)
                EinZahlwegKontrollieren(ZahlwegIDALBVZusatz);
            if (ZahlwegIDALV>0 && ZahlwegIDALV != ZahlwegIDALBV && ZahlwegIDALV != ZahlwegIDALBVZusatz)
                EinZahlwegKontrollieren(ZahlwegIDALV);
            if (ZahlwegIDKiZu>0 && ZahlwegIDKiZu != ZahlwegIDALBV && ZahlwegIDKiZu != ZahlwegIDALBVZusatz && ZahlwegIDKiZu != ZahlwegIDALV)
                EinZahlwegKontrollieren(ZahlwegIDKiZu);
        }

        private void InterneVerrechnungOeffnen()
        {
            // Auswahl der Gläubiger
            qryPerson.Fill(FaLeistungID);
            // Auswahl der Zahlungswege
            qryZahlungsweg.Fill(FaFallID, FaLeistungID);
            // InterneVerrechnung
            qryInterneVerrechnung.Fill(FaLeistungID);
        }

        private void SetZahlwegMemos(string Fieldname)
        {
            if (Fieldname == "ALBV")
            {
                FillZWInfos(Utils.ConvertToInt(edtBaZahlungswegID_ALBV.EditValue), memALBVName, memALBVKonto);
            }
            else if (Fieldname == "ALBVZusatz")
            {
                FillZWInfos(Utils.ConvertToInt(edtBaZahlungswegID_ALBVZusatz.EditValue), memALBVZusatzName, memALBVZusatzKonto);
            }
            else if (Fieldname == "ALV")
            {
                FillZWInfos(Utils.ConvertToInt(edtBaZahlungswegID_ALV.EditValue), memALVName, memALVKonto);
            }
            else if (Fieldname == "KiZu")
            {
                FillZWInfos(Utils.ConvertToInt(edtBaZahlungswegID_KiZu.EditValue), memKiZuName, memKiZuKonto);
            }
        }

        private void VorhandeneBuchungenKorrigieren()
        {
            bool hasError;
            string errorText;

            SqlQuery qry = DBUtil.OpenSQL(@"exec dbo.spKbBuchung_Update_Zahlungsweg {0}", FaLeistungID);
            hasError = (Utils.ConvertToInt(qry["HasErrors"]) != 0);
            if (hasError)
            {
                errorText = Utils.ConvertToString(qry["ErrorText"]);
                KissMsg.ShowInfo(errorText);
            }
        }

        private bool ZahlungswegIstGewaehlt(string FeldName, string Name)
        {
            if (FaProzessCode == 405)
            {
                if (DBUtil.IsEmpty(qryInterneVerrechnung["IntVerrechnung_" + FeldName])) return true;
            }

            if (
                (!Utils.ConvertToBool(qryInterneVerrechnung["IntVerrechnung_" + FeldName], false)) &&
                DBUtil.IsEmpty(qryInterneVerrechnung["BaZahlungswegID_" + FeldName])
            )
            {
                KissMsg.ShowInfo(string.Format(
                    "Wenn keine interne Verrechnung {0} vorliegt, dann muss ein {0}-Zahlungsweg angegeben werden.",
                    Name
                ));
                return false;
            }
            return true;
        }

        private bool ZahlwegGueltigkeitenChecken()
        {
            // Alle Zahlungswege kontrollieren
            if (!ZwGueltigkeitIstOK("ALBV", PCodeText)) return false;
            if (!ZwGueltigkeitIstOK("ALBVZusatz", PCodeTextZusatz)) return false;
            if (!ZwGueltigkeitIstOK("ALV", "ALV")) return false;
            if (!ZwGueltigkeitIstOK("KiZu", "Kinderzulagen")) return false;
            return true;
        }

        private bool ZwGueltigkeitIstOK(string FeldName, string Name)
        {
            if (DBUtil.IsEmpty(qryInterneVerrechnung["BaZahlungswegID_" + FeldName])) return true;

            // Zahlungsweg in Auswahl finden
            int ZwID = Utils.ConvertToInt(qryInterneVerrechnung["BaZahlungswegID_" + FeldName]);
            if (!qryZahlungsweg.Find("Code=" + ZwID.ToString()))
            {
                KissMsg.ShowInfo(string.Format("Der gewählte Zahlungsweg {0} konnte nicht gefunden werden.", Name));
                return false;
            }

            // 17.07.2009: Kontrolle entfernt, da nun doch in Zukunft erfasst werden soll
            // Kontrolle der Gültigkeit des Zahlungswegs gemäss Datum
            /*
            DateTime DVon = (DateTime)qryZahlungsweg["DatumVonKontrolle"];
            DateTime DBis = (DateTime)qryZahlungsweg["DatumBisKontrolle"];
            if (DVon > DateTime.Today || DBis < DateTime.Today)
            {
                KissMsg.ShowInfo(string.Format("Der gewählte Zahlungsweg {0} ist zum heutigen Zeitpunkt nicht gültig.", Name));
                return false;
            }
             * */
            return true;
        }

        #endregion

        #endregion
    }
}